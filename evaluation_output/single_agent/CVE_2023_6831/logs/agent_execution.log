2026-01-16 17:40:44,363 - orchestrator - INFO - Starting single-agent patching run for CVE-2023-6831
2026-01-16 17:40:44,363 - orchestrator - INFO - Starting single-agent patching run for CVE-2023-6831
2026-01-16 17:40:44,367 - orchestrator - INFO - Using container: single_agent_cve-2023-6831_0501fd0b, work_dir: /workspace/mlflow
2026-01-16 17:40:44,367 - orchestrator - INFO - Using container: single_agent_cve-2023-6831_0501fd0b, work_dir: /workspace/mlflow
2026-01-16 17:40:44,368 - src.agents.base - INFO - SingleAgent - LLM call prompt (2442 chars):
## Your Mission

Fix the security vulnerability in this codebase.

## Vulnerability Details

**CVE:** CVE-2023-6831
**CWE:** ['CWE-73', 'CWE-22']
**Affected File:** mlflow/utils/uri.py

**Vulnerable Locations:**
Not provided

### Description
No description provided. You'll need to investigate.

### Vulnerable Code Snippet (may be stale vs line numbers)
```Python
def validate_path_is_safe(path):
    """
    Validates that the specified path is safe to join with a trusted prefix. This is a security
    measure to prevent path traversal attacks.
    A valid path should:
        not contain separators other than '/'
        not contain .. to navigate to parent dir in path
        not be an absolute path
    """
    from mlflow.utils.file_utils import local_file_uri_to_path

    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
    if any((s in path) for s in ("#", "%23")):
        raise exc

    if is_file_uri(path):
        path = local_file_uri_to_path(path)
    if (
        any((s in path) for s in _OS_ALT_SEPS)
        or ".." in path.split("/")
        or pathlib.PureWindowsPath(path).is_absolute()
        or pathlib.PurePosixPath(path).is_absolute()
        or (is_windows() and len(path) >= 2 and path[1] == ":")
    ):
        raise exc
```

## Your Task

Execute the complete patching workflow autonomously:

1. **ANALYZE**: Read and understand the vulnerable code
   - Use ReadFile to examine the full file
   - Use FindClass to understand dependencies
   - Identify the root cause based on CWE/CVE information
   - Account for **all** listed vulnerable locations (multiple hunks/files may be affected)

2. **PLAN**: Formulate your fix strategy
   - Decide what needs to change and why
   - Consider security completeness and edge cases
   - Keep changes minimal and focused

3. **IMPLEMENT**: Apply the patch
   - Use EditCode to modify the vulnerable code
   - Ensure complete, valid, syntactically correct code
   - Preserve existing style and conventions

4. **VERIFY**: Run tests to validate
   - Use RunTest to execute PoC and unit tests
   - Read test output carefully to determine pass/fail
   - Verify both security fix and no regressions

5. **ITERATE**: If tests fail, adjust and retry
   - Analyze what went wrong
   - Try a different approach
   - Don't repeat the same mistake

You have all the tools and knowledge you need. Work autonomously and systematically.

Begin!

2026-01-16 17:40:44,368 - src.agents.base - INFO - SingleAgent - LLM call prompt (2442 chars):
## Your Mission

Fix the security vulnerability in this codebase.

## Vulnerability Details

**CVE:** CVE-2023-6831
**CWE:** ['CWE-73', 'CWE-22']
**Affected File:** mlflow/utils/uri.py

**Vulnerable Locations:**
Not provided

### Description
No description provided. You'll need to investigate.

### Vulnerable Code Snippet (may be stale vs line numbers)
```Python
def validate_path_is_safe(path):
    """
    Validates that the specified path is safe to join with a trusted prefix. This is a security
    measure to prevent path traversal attacks.
    A valid path should:
        not contain separators other than '/'
        not contain .. to navigate to parent dir in path
        not be an absolute path
    """
    from mlflow.utils.file_utils import local_file_uri_to_path

    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
    if any((s in path) for s in ("#", "%23")):
        raise exc

    if is_file_uri(path):
        path = local_file_uri_to_path(path)
    if (
        any((s in path) for s in _OS_ALT_SEPS)
        or ".." in path.split("/")
        or pathlib.PureWindowsPath(path).is_absolute()
        or pathlib.PurePosixPath(path).is_absolute()
        or (is_windows() and len(path) >= 2 and path[1] == ":")
    ):
        raise exc
```

## Your Task

Execute the complete patching workflow autonomously:

1. **ANALYZE**: Read and understand the vulnerable code
   - Use ReadFile to examine the full file
   - Use FindClass to understand dependencies
   - Identify the root cause based on CWE/CVE information
   - Account for **all** listed vulnerable locations (multiple hunks/files may be affected)

2. **PLAN**: Formulate your fix strategy
   - Decide what needs to change and why
   - Consider security completeness and edge cases
   - Keep changes minimal and focused

3. **IMPLEMENT**: Apply the patch
   - Use EditCode to modify the vulnerable code
   - Ensure complete, valid, syntactically correct code
   - Preserve existing style and conventions

4. **VERIFY**: Run tests to validate
   - Use RunTest to execute PoC and unit tests
   - Read test output carefully to determine pass/fail
   - Verify both security fix and no regressions

5. **ITERATE**: If tests fail, adjust and retry
   - Analyze what went wrong
   - Try a different approach
   - Don't repeat the same mistake

You have all the tools and knowledge you need. Work autonomously and systematically.

Begin!

2026-01-16 17:40:47,399 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:47,399 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:47,399 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 1,
  "end_line": 60
}
2026-01-16 17:40:47,399 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 1,
  "end_line": 60
}
2026-01-16 17:40:47,654 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:47,654 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:48,552 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:48,552 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:48,552 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 61,
  "end_line": 120
}
2026-01-16 17:40:48,552 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 61,
  "end_line": 120
}
2026-01-16 17:40:48,707 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:48,707 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:49,607 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:49,607 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:49,608 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 121,
  "end_line": 180
}
2026-01-16 17:40:49,608 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 121,
  "end_line": 180
}
2026-01-16 17:40:49,740 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:49,740 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:51,214 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:51,214 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:51,214 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 181,
  "end_line": 240
}
2026-01-16 17:40:51,214 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 181,
  "end_line": 240
}
2026-01-16 17:40:51,368 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:51,368 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:52,178 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:52,178 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:52,178 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 241,
  "end_line": 300
}
2026-01-16 17:40:52,178 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 241,
  "end_line": 300
}
2026-01-16 17:40:52,328 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:52,328 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:53,154 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:53,154 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:53,154 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 301,
  "end_line": 360
}
2026-01-16 17:40:53,154 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 301,
  "end_line": 360
}
2026-01-16 17:40:53,293 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:53,293 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:54,128 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:54,128 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:54,128 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 361,
  "end_line": 420
}
2026-01-16 17:40:54,128 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 361,
  "end_line": 420
}
2026-01-16 17:40:54,279 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:54,279 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:55,106 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:55,106 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:55,106 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 421,
  "end_line": 480
}
2026-01-16 17:40:55,106 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "start_line": 421,
  "end_line": 480
}
2026-01-16 17:40:55,250 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:55,250 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:56,795 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:40:56,795 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:40:56,795 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "validate_path_is_safe",
  "search_type": "usage",
  "file_pattern": "*.py"
}
2026-01-16 17:40:56,795 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "validate_path_is_safe",
  "search_type": "usage",
  "file_pattern": "*.py"
}
2026-01-16 17:40:57,062 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:40:57,062 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:40:58,523 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:58,523 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:58,524 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "tests/tracking/test_rest_tracking.py",
  "start_line": 520,
  "end_line": 580
}
2026-01-16 17:40:58,524 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "tests/tracking/test_rest_tracking.py",
  "start_line": 520,
  "end_line": 580
}
2026-01-16 17:40:58,661 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:58,661 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:40:59,898 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:59,898 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:40:59,898 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "tests/tracking/test_rest_tracking.py",
  "start_line": 1,
  "end_line": 40
}
2026-01-16 17:40:59,898 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "tests/tracking/test_rest_tracking.py",
  "start_line": 1,
  "end_line": 40
}
2026-01-16 17:41:00,029 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:00,029 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:01,070 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:01,070 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:01,070 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 1,
  "end_line": 60
}
2026-01-16 17:41:01,070 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 1,
  "end_line": 60
}
2026-01-16 17:41:01,206 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:01,206 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:02,216 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:02,216 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:02,216 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/file_utils.py"
}
2026-01-16 17:41:02,216 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/file_utils.py"
}
2026-01-16 17:41:02,768 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:02,768 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:03,731 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:03,731 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:03,731 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 61,
  "end_line": 120
}
2026-01-16 17:41:03,731 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 61,
  "end_line": 120
}
2026-01-16 17:41:03,872 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:03,872 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:05,868 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:05,868 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:05,868 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 121,
  "end_line": 180
}
2026-01-16 17:41:05,868 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 121,
  "end_line": 180
}
2026-01-16 17:41:06,007 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:06,007 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:07,036 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:07,036 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:07,036 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 181,
  "end_line": 240
}
2026-01-16 17:41:07,036 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 181,
  "end_line": 240
}
2026-01-16 17:41:07,179 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:07,179 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:08,215 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:08,215 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:08,215 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 241,
  "end_line": 300
}
2026-01-16 17:41:08,215 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 241,
  "end_line": 300
}
2026-01-16 17:41:08,363 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:08,363 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:09,310 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:09,310 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:09,311 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 1,
  "end_line": 300
}
2026-01-16 17:41:09,311 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 1,
  "end_line": 300
}
2026-01-16 17:41:09,456 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:09,456 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:10,586 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:10,586 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:10,587 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/file_utils.py"
}
2026-01-16 17:41:10,587 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/file_utils.py"
}
2026-01-16 17:41:11,109 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:11,109 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:12,231 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:12,231 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:12,232 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/*"
}
2026-01-16 17:41:12,232 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/*"
}
2026-01-16 17:41:12,765 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:12,765 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:13,738 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:13,738 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:13,738 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/*"
}
2026-01-16 17:41:13,738 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/*"
}
2026-01-16 17:41:14,257 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:14,257 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:15,269 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:15,269 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:15,270 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 301,
  "end_line": 360
}
2026-01-16 17:41:15,270 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 301,
  "end_line": 360
}
2026-01-16 17:41:15,410 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:15,410 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:16,556 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:16,556 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:16,556 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/file_utils.py"
}
2026-01-16 17:41:16,556 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/file_utils.py"
}
2026-01-16 17:41:17,079 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:17,079 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:18,862 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:18,862 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:18,862 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/*"
}
2026-01-16 17:41:18,862 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/utils/*"
}
2026-01-16 17:41:19,392 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:19,392 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:20,406 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:20,406 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:20,407 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/*"
}
2026-01-16 17:41:20,407 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "definition",
  "file_pattern": "mlflow/*"
}
2026-01-16 17:41:20,917 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:20,917 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:22,008 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:22,008 - src.agents.base - INFO - SingleAgent executing tool: FindClass
2026-01-16 17:41:22,008 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "all",
  "file_pattern": "*"
}
2026-01-16 17:41:22,008 - src.agents.base - INFO - Tool arguments:
{
  "symbol_name": "local_file_uri_to_path",
  "search_type": "all",
  "file_pattern": "*"
}
2026-01-16 17:41:23,879 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:23,879 - src.agents.base - INFO - Tool FindClass: âœ“
2026-01-16 17:41:25,180 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:25,180 - src.agents.base - INFO - SingleAgent executing tool: ReadFile
2026-01-16 17:41:25,181 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 610,
  "end_line": 660
}
2026-01-16 17:41:25,181 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/file_utils.py",
  "start_line": 610,
  "end_line": 660
}
2026-01-16 17:41:25,326 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:25,326 - src.agents.base - INFO - Tool ReadFile: âœ“
2026-01-16 17:41:41,025 - src.agents.base - INFO - SingleAgent executing tool: EditCode
2026-01-16 17:41:41,025 - src.agents.base - INFO - SingleAgent executing tool: EditCode
2026-01-16 17:41:41,025 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "old_code": "def validate_path_is_safe(path):\n    \"\"\"\n    Validates that the specified path is safe to join with a trusted prefix. This is a security\n    measure to prevent path traversal attacks.\n    A valid path should:\n        not contain separators other than '/'\n        not contain .. to navigate to parent dir in path\n        not be an absolute path\n    \"\"\"\n    from mlflow.utils.file_utils import local_file_uri_to_path\n\n    exc = MlflowException(f\"Invalid path: {path}\", error_code=INVALID_PARAMETER_VALUE)\n    if any((s in path) for s in (\"#\", \"%23\")):\n        raise exc\n\n    if is_file_uri(path):\n        path = local_file_uri_to_path(path)\n    if (\n        any((s in path) for s in _OS_ALT_SEPS)\n        or \"..\" in path.split(\"/\")\n        or pathlib.PureWindowsPath(path).is_absolute()\n        or pathlib.PurePosixPath(path).is_absolute()\n        or (is_windows() and len(path) >= 2 and path[1] == \":\")\n    ):\n        raise exc\n",
  "new_code": "def validate_path_is_safe(path):\n    \"\"\"\n    Validates that the specified path is safe to join with a trusted prefix. This is a security\n    measure to prevent path traversal attacks.\n    A valid path should:\n        not contain separators other than '/'\n        not contain .. to navigate to parent dir in path\n        not be an absolute path\n    \"\"\"\n    from mlflow.utils.file_utils import local_file_uri_to_path\n    import urllib.parse\n    import posixpath\n\n    exc = MlflowException(f\"Invalid path: {path}\", error_code=INVALID_PARAMETER_VALUE)\n\n    # Decode percent-encoded sequences\n    decoded_path = urllib.parse.unquote(path)\n\n    # Disallow null bytes (both literal and percent-encoded)\n    if \"\\x00\" in decoded_path or \"%00\" in path:\n        raise exc\n\n    # Disallow dangerous characters\n    if any((s in decoded_path) for s in (\"#\",)):\n        raise exc\n\n    if is_file_uri(decoded_path):\n        decoded_path = local_file_uri_to_path(decoded_path)\n\n    # Disallow alternative OS separators\n    if any((s in decoded_path) for s in _OS_ALT_SEPS):\n        raise exc\n\n    # Normalize the path and check for traversal\n    norm_path = posixpath.normpath(decoded_path)\n    if norm_path.startswith(\"..\") or \"/../\" in norm_path or norm_path == \"..\":\n        raise exc\n\n    # Disallow absolute paths\n    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "fuzzy_match": true,
  "skip_validation": false
}
2026-01-16 17:41:41,025 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "old_code": "def validate_path_is_safe(path):\n    \"\"\"\n    Validates that the specified path is safe to join with a trusted prefix. This is a security\n    measure to prevent path traversal attacks.\n    A valid path should:\n        not contain separators other than '/'\n        not contain .. to navigate to parent dir in path\n        not be an absolute path\n    \"\"\"\n    from mlflow.utils.file_utils import local_file_uri_to_path\n\n    exc = MlflowException(f\"Invalid path: {path}\", error_code=INVALID_PARAMETER_VALUE)\n    if any((s in path) for s in (\"#\", \"%23\")):\n        raise exc\n\n    if is_file_uri(path):\n        path = local_file_uri_to_path(path)\n    if (\n        any((s in path) for s in _OS_ALT_SEPS)\n        or \"..\" in path.split(\"/\")\n        or pathlib.PureWindowsPath(path).is_absolute()\n        or pathlib.PurePosixPath(path).is_absolute()\n        or (is_windows() and len(path) >= 2 and path[1] == \":\")\n    ):\n        raise exc\n",
  "new_code": "def validate_path_is_safe(path):\n    \"\"\"\n    Validates that the specified path is safe to join with a trusted prefix. This is a security\n    measure to prevent path traversal attacks.\n    A valid path should:\n        not contain separators other than '/'\n        not contain .. to navigate to parent dir in path\n        not be an absolute path\n    \"\"\"\n    from mlflow.utils.file_utils import local_file_uri_to_path\n    import urllib.parse\n    import posixpath\n\n    exc = MlflowException(f\"Invalid path: {path}\", error_code=INVALID_PARAMETER_VALUE)\n\n    # Decode percent-encoded sequences\n    decoded_path = urllib.parse.unquote(path)\n\n    # Disallow null bytes (both literal and percent-encoded)\n    if \"\\x00\" in decoded_path or \"%00\" in path:\n        raise exc\n\n    # Disallow dangerous characters\n    if any((s in decoded_path) for s in (\"#\",)):\n        raise exc\n\n    if is_file_uri(decoded_path):\n        decoded_path = local_file_uri_to_path(decoded_path)\n\n    # Disallow alternative OS separators\n    if any((s in decoded_path) for s in _OS_ALT_SEPS):\n        raise exc\n\n    # Normalize the path and check for traversal\n    norm_path = posixpath.normpath(decoded_path)\n    if norm_path.startswith(\"..\") or \"/../\" in norm_path or norm_path == \"..\":\n        raise exc\n\n    # Disallow absolute paths\n    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "fuzzy_match": true,
  "skip_validation": false
}
2026-01-16 17:41:41,174 - src.tools.edit_code - INFO - EditCodeTool: Writing 17406 chars to mlflow/utils/uri.py (match_type=exact)
2026-01-16 17:41:41,174 - src.tools.edit_code - INFO - EditCodeTool: Writing 17406 chars to mlflow/utils/uri.py (match_type=exact)
2026-01-16 17:41:41,306 - src.agents.base - INFO - Tool EditCode: âœ“
2026-01-16 17:41:41,306 - src.agents.base - INFO - Tool EditCode: âœ“
2026-01-16 17:41:42,529 - src.agents.base - INFO - SingleAgent executing tool: RunTest
2026-01-16 17:41:42,529 - src.agents.base - INFO - SingleAgent executing tool: RunTest
2026-01-16 17:41:42,529 - src.agents.base - INFO - Tool arguments:
{
  "run_prepare": true,
  "timeout": 180,
  "include_paths": [
    "mlflow/utils/uri.py"
  ],
  "run_unittest": true
}
2026-01-16 17:41:42,529 - src.agents.base - INFO - Tool arguments:
{
  "run_prepare": true,
  "timeout": 180,
  "include_paths": [
    "mlflow/utils/uri.py"
  ],
  "run_unittest": true
}
2026-01-16 17:41:42,848 - src.tools.run_test - INFO - Extracted 4 file paths from /workspace/test.patch: ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:41:42,848 - src.tools.run_test - INFO - Extracted 4 file paths from /workspace/test.patch: ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:41:42,848 - src.tools.run_test - INFO - Generating git diff for fix.patch
2026-01-16 17:41:42,848 - src.tools.run_test - INFO - Generating git diff for fix.patch
2026-01-16 17:41:42,848 - src.tools.run_test - INFO -   include_paths: ['mlflow/utils/uri.py']
2026-01-16 17:41:42,848 - src.tools.run_test - INFO -   include_paths: ['mlflow/utils/uri.py']
2026-01-16 17:41:42,848 - src.tools.run_test - INFO -   exclude_paths (from test.patch): ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:41:42,848 - src.tools.run_test - INFO -   exclude_paths (from test.patch): ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:41:42,848 - src.tools.run_test - INFO -   git diff command: git diff HEAD -- 'mlflow/utils/uri.py' ':(exclude)tests/utils/test_uri.py' ':(exclude)tests/tracking/test_rest_tracking.py' ':(exclude)tests/store/artifact/test_http_artifact_repo.py' ':(exclude)tests/server/test_handlers.py'
2026-01-16 17:41:42,848 - src.tools.run_test - INFO -   git diff command: git diff HEAD -- 'mlflow/utils/uri.py' ':(exclude)tests/utils/test_uri.py' ':(exclude)tests/tracking/test_rest_tracking.py' ':(exclude)tests/store/artifact/test_http_artifact_repo.py' ':(exclude)tests/server/test_handlers.py'
2026-01-16 17:41:42,995 - src.tools.run_test - INFO -   Generated patch: 1828 bytes, 51 lines
2026-01-16 17:41:42,995 - src.tools.run_test - INFO -   Generated patch: 1828 bytes, 51 lines
2026-01-16 17:41:42,996 - src.tools.run_test - INFO -   Patch content:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..a58f4b7 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,36 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
     exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if any((s in decoded_path) for s in ("#",)):
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path and check for traversal
+    norm_path = posixpath.normpath(decoded_path)
+    if norm_path.startswith("..") or "/../" in norm_path or norm_path == "..":
+        raise exc
+
+    # Disallow absolute paths
+    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc

2026-01-16 17:41:42,996 - src.tools.run_test - INFO -   Patch content:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..a58f4b7 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,36 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
     exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if any((s in decoded_path) for s in ("#",)):
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path and check for traversal
+    norm_path = posixpath.normpath(decoded_path)
+    if norm_path.startswith("..") or "/../" in norm_path or norm_path == "..":
+        raise exc
+
+    # Disallow absolute paths
+    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc

2026-01-16 17:41:43,084 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:41:43,084 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:41:44,664 - src.tools.run_test - INFO - Running fix-run.sh for PoC validation...
2026-01-16 17:41:44,664 - src.tools.run_test - INFO - Running fix-run.sh for PoC validation...
2026-01-16 17:41:44,757 - src.tools.run_test - INFO - Patch being tested:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..a58f4b7 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,36 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
     exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if any((s in decoded_path) for s in ("#",)):
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path and check for traversal
+    norm_path = posixpath.normpath(decoded_path)
+    if norm_path.startswith("..") or "/../" in norm_path or norm_path == "..":
+        raise exc
+
+    # Disallow absolute paths
+    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc


2026-01-16 17:41:44,757 - src.tools.run_test - INFO - Patch being tested:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..a58f4b7 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,36 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
     exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if any((s in decoded_path) for s in ("#",)):
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path and check for traversal
+    norm_path = posixpath.normpath(decoded_path)
+    if norm_path.startswith("..") or "/../" in norm_path or norm_path == "..":
+        raise exc
+
+    # Disallow absolute paths
+    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc


2026-01-16 17:41:48,102 - src.tools.run_test - INFO - fix-run.sh completed with exit code 1
2026-01-16 17:41:48,102 - src.tools.run_test - INFO - fix-run.sh completed with exit code 1
2026-01-16 17:41:48,103 - src.tools.run_test - INFO - fix-run.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 26 items

tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [  3%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [  7%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 11%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 15%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 19%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 26%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 30%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 34%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 38%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 42%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 46%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[./../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 50%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 53%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 57%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a#/..//tmp] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 61%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a%23/..//tmp/] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 65%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 69%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 73%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.html] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 76%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.txt] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 80%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.php] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 84%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.asp] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 88%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 92%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 96%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m____ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] ____[0m

enable_serve_artifacts = None, path = '/path'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path: /path' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /path[0m
[1m[31mE         ?             +++++++[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /path'}
path       = '/path'
response   = <Response 75 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] _[0m

enable_serve_artifacts = None, path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
>       response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m

enable_serve_artifacts = None
path       = 'path/../to/file'

[1m[31mtests/server/test_handlers.py[0m:800: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31mmlflow/server/handlers.py[0m:497: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc41f0c10>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:519: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc41f0b80>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:1961: in _delete_artifact_mlflow_artifacts
    [0m_get_request_message(DeleteArtifact())[90m[39;49;00m
        artifact_path = 'path/../to/file'
[1m[31mmlflow/server/handlers.py[0m:413: in _get_request_message
    [0m[94mif[39;49;00m flask_request.method == [33m"[39;49;00m[33mGET[39;49;00m[33m"[39;49;00m [95mand[39;49;00m [96mlen[39;49;00m(flask_request.query_string) > [94m0[39;49;00m:[90m[39;49;00m
        flask_request = <LocalProxy unbound>
        parser     = <module 'querystring_parser.parser' from '/workspace/PoC_env/CVE-2023-6831/lib/python3.8/site-packages/querystring_parser/parser.py'>
        request_message = 
        schema     = None
[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:318: in __get__
    [0mobj = instance._get_current_object()[90m[39;49;00m
        instance   = <LocalProxy unbound>
        owner      = <class 'werkzeug.local.LocalProxy'>
        self       = proxy __getattr__
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[94mdef[39;49;00m[90m [39;49;00m[92m_get_current_object[39;49;00m() -> T:[90m[39;49;00m
        [94mtry[39;49;00m:[90m[39;49;00m
            obj = local.get()[90m[39;49;00m
        [94mexcept[39;49;00m [96mLookupError[39;49;00m:[90m[39;49;00m
>           [94mraise[39;49;00m [96mRuntimeError[39;49;00m(unbound_message) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
[1m[31mE           RuntimeError: Working outside of request context.[0m
[1m[31mE           [0m
[1m[31mE           This typically means that you attempted to use functionality that needed[0m
[1m[31mE           an active HTTP request. Consult the documentation on testing for[0m
[1m[31mE           information about how to avoid this problem.[0m

get_name   = operator.attrgetter('request')
local      = <ContextVar name='flask.request_ctx' at 0x7fffc49053b0>
unbound_message = 'Working outside of request context.\n\nThis typically means that you attempted to use functionality that needed\nan active HTTP request. Consult the documentation on testing for\ninformation about how to avoid this problem.'

[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:519: RuntimeError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] _[0m

enable_serve_artifacts = None, path = '/etc/passwd'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path: /etc/passwd' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /etc/passwd[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /etc/passwd'}
path       = '/etc/passwd'
response   = <Response 81 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] _[0m

enable_serve_artifacts = None, path = '/etc/passwd%00.jpg'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path...passwd%00.jpg' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /etc/passwd%00.jpg[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /etc/passwd%00.jpg'}
path       = '/etc/passwd%00.jpg'
response   = <Response 88 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] _[0m

enable_serve_artifacts = None, path = '/file://etc/passwd'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path...://etc/passwd' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /file://etc/passwd[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /file://etc/passwd'}
path       = '/file://etc/passwd'
response   = <Response 88 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] _[0m

enable_serve_artifacts = None, path = '%2E%2E%2F%2E%2E%2Fpath'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path...%2E%2E%2Fpath' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: %2E%2E%2F%2E%2E%2Fpath[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: %2E%2E%2F%2E%2E%2Fpath'}
path       = '%2E%2E%2F%2E%2E%2Fpath'
response   = <Response 92 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_______________ test_validate_path_is_safe_bad[path/../to/file] ________________[0m

path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.skipif(is_windows(), reason=[33m"[39;49;00m[33mThis test does not pass on Windows[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
    [37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m./../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a#/..//tmp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a[39;49;00m[33m%[39;49;00m[33m23/..//tmp/[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.html[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.txt[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.php[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.asp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [90m# Encoded paths with '..'[39;49;00m[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_validate_path_is_safe_bad[39;49;00m(path):[90m[39;49;00m
        [94mwith[39;49;00m pytest.raises(MlflowException, match=[33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m):[90m[39;49;00m
>           validate_path_is_safe(path)[90m[39;49;00m
[1m[31mE           Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>[0m

path       = 'path/../to/file'

[1m[31mtests/utils/test_uri.py[0m:780: Failed
============================= slowest 10 durations =============================

(10 durations < 0.005s hidden.  Use -vv to show these durations.)
======================= command to run failed test cases =======================
pytest 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath]' 'tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file]'

[36m[1m=========================== short test summary info ============================[0m
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path][0m - AssertionError: assert 'Invalid path: /path' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file][0m - RuntimeError: Working outside of request context.
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd][0m - AssertionError: assert 'Invalid path: /etc/passwd' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg][0m - AssertionError: assert 'Invalid path...passwd%00.jpg' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd][0m - AssertionError: assert 'Invalid path...://etc/passwd' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath][0m - AssertionError: assert 'Invalid path...%2E%2E%2Fpath' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/utils/test_uri.py::[1mtest_validate_path_is_safe_bad[path/../to/file][0m - Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>
[31m================== [31m[1m7 failed[0m, [32m19 passed[0m, [33m14 warnings[0m[31m in 0.58s[0m[31m ===================[0m

2026-01-16 17:41:48,103 - src.tools.run_test - INFO - fix-run.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 26 items

tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [  3%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [  7%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 11%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 15%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 19%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 26%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 30%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 34%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 38%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 42%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 46%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[./../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 50%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 53%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 57%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a#/..//tmp] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 61%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a%23/..//tmp/] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 65%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 69%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 73%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.html] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 76%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.txt] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 80%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.php] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 84%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.asp] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 88%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 92%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [ 96%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m____ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] ____[0m

enable_serve_artifacts = None, path = '/path'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path: /path' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /path[0m
[1m[31mE         ?             +++++++[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /path'}
path       = '/path'
response   = <Response 75 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] _[0m

enable_serve_artifacts = None, path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
>       response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m

enable_serve_artifacts = None
path       = 'path/../to/file'

[1m[31mtests/server/test_handlers.py[0m:800: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31mmlflow/server/handlers.py[0m:497: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc41f0c10>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:519: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc41f0b80>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:1961: in _delete_artifact_mlflow_artifacts
    [0m_get_request_message(DeleteArtifact())[90m[39;49;00m
        artifact_path = 'path/../to/file'
[1m[31mmlflow/server/handlers.py[0m:413: in _get_request_message
    [0m[94mif[39;49;00m flask_request.method == [33m"[39;49;00m[33mGET[39;49;00m[33m"[39;49;00m [95mand[39;49;00m [96mlen[39;49;00m(flask_request.query_string) > [94m0[39;49;00m:[90m[39;49;00m
        flask_request = <LocalProxy unbound>
        parser     = <module 'querystring_parser.parser' from '/workspace/PoC_env/CVE-2023-6831/lib/python3.8/site-packages/querystring_parser/parser.py'>
        request_message = 
        schema     = None
[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:318: in __get__
    [0mobj = instance._get_current_object()[90m[39;49;00m
        instance   = <LocalProxy unbound>
        owner      = <class 'werkzeug.local.LocalProxy'>
        self       = proxy __getattr__
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[94mdef[39;49;00m[90m [39;49;00m[92m_get_current_object[39;49;00m() -> T:[90m[39;49;00m
        [94mtry[39;49;00m:[90m[39;49;00m
            obj = local.get()[90m[39;49;00m
        [94mexcept[39;49;00m [96mLookupError[39;49;00m:[90m[39;49;00m
>           [94mraise[39;49;00m [96mRuntimeError[39;49;00m(unbound_message) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
[1m[31mE           RuntimeError: Working outside of request context.[0m
[1m[31mE           [0m
[1m[31mE           This typically means that you attempted to use functionality that needed[0m
[1m[31mE           an active HTTP request. Consult the documentation on testing for[0m
[1m[31mE           information about how to avoid this problem.[0m

get_name   = operator.attrgetter('request')
local      = <ContextVar name='flask.request_ctx' at 0x7fffc49053b0>
unbound_message = 'Working outside of request context.\n\nThis typically means that you attempted to use functionality that needed\nan active HTTP request. Consult the documentation on testing for\ninformation about how to avoid this problem.'

[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:519: RuntimeError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] _[0m

enable_serve_artifacts = None, path = '/etc/passwd'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path: /etc/passwd' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /etc/passwd[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /etc/passwd'}
path       = '/etc/passwd'
response   = <Response 81 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] _[0m

enable_serve_artifacts = None, path = '/etc/passwd%00.jpg'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path...passwd%00.jpg' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /etc/passwd%00.jpg[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /etc/passwd%00.jpg'}
path       = '/etc/passwd%00.jpg'
response   = <Response 88 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] _[0m

enable_serve_artifacts = None, path = '/file://etc/passwd'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path...://etc/passwd' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: /file://etc/passwd[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: /file://etc/passwd'}
path       = '/file://etc/passwd'
response   = <Response 88 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] _[0m

enable_serve_artifacts = None, path = '%2E%2E%2F%2E%2E%2Fpath'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
        response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m
        [94massert[39;49;00m response.status_code == [94m400[39;49;00m[90m[39;49;00m
        json_response = json.loads(response.get_data())[90m[39;49;00m
        [94massert[39;49;00m json_response[[33m"[39;49;00m[33merror_code[39;49;00m[33m"[39;49;00m] == ErrorCode.Name(INVALID_PARAMETER_VALUE)[90m[39;49;00m
>       [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE       AssertionError: assert 'Invalid path...%2E%2E%2Fpath' == 'Invalid path'[0m
[1m[31mE         [0m
[1m[31mE         - Invalid path[0m
[1m[31mE         + Invalid path: %2E%2E%2F%2E%2E%2Fpath[0m

enable_serve_artifacts = None
json_response = {'error_code': 'INVALID_PARAMETER_VALUE', 'message': 'Invalid path: %2E%2E%2F%2E%2E%2Fpath'}
path       = '%2E%2E%2F%2E%2E%2Fpath'
response   = <Response 92 bytes [400 BAD REQUEST]>

[1m[31mtests/server/test_handlers.py[0m:804: AssertionError
[31m[1m_______________ test_validate_path_is_safe_bad[path/../to/file] ________________[0m

path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.skipif(is_windows(), reason=[33m"[39;49;00m[33mThis test does not pass on Windows[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
    [37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m./../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a#/..//tmp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a[39;49;00m[33m%[39;49;00m[33m23/..//tmp/[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.html[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.txt[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.php[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.asp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [90m# Encoded paths with '..'[39;49;00m[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_validate_path_is_safe_bad[39;49;00m(path):[90m[39;49;00m
        [94mwith[39;49;00m pytest.raises(MlflowException, match=[33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m):[90m[39;49;00m
>           validate_path_is_safe(path)[90m[39;49;00m
[1m[31mE           Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>[0m

path       = 'path/../to/file'

[1m[31mtests/utils/test_uri.py[0m:780: Failed
============================= slowest 10 durations =============================

(10 durations < 0.005s hidden.  Use -vv to show these durations.)
======================= command to run failed test cases =======================
pytest 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd]' 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath]' 'tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file]'

[36m[1m=========================== short test summary info ============================[0m
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path][0m - AssertionError: assert 'Invalid path: /path' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file][0m - RuntimeError: Working outside of request context.
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd][0m - AssertionError: assert 'Invalid path: /etc/passwd' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg][0m - AssertionError: assert 'Invalid path...passwd%00.jpg' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd][0m - AssertionError: assert 'Invalid path...://etc/passwd' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath][0m - AssertionError: assert 'Invalid path...%2E%2E%2Fpath' == 'Invalid path'
[31mFAILED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m tests/utils/test_uri.py::[1mtest_validate_path_is_safe_bad[path/../to/file][0m - Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>
[31m================== [31m[1m7 failed[0m, [32m19 passed[0m, [33m14 warnings[0m[31m in 0.58s[0m[31m ===================[0m

2026-01-16 17:41:48,206 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:41:48,206 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:41:48,918 - src.tools.run_test - INFO - Running unit_test.sh for regression testing...
2026-01-16 17:41:48,918 - src.tools.run_test - INFO - Running unit_test.sh for regression testing...
2026-01-16 17:41:59,723 - src.tools.run_test - INFO - unit_test.sh completed with exit code 0
2026-01-16 17:41:59,723 - src.tools.run_test - INFO - unit_test.sh completed with exit code 0
2026-01-16 17:41:59,724 - src.tools.run_test - INFO - unit_test.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 236 items / 3 deselected / 233 selected

tests/server/test_handlers.py::test_health [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_get_endpoints [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_all_model_registry_endpoints_available [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_can_parse_json [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_content_type_params [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_get_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_json_string [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_invalid_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_missing_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_search_runs_default_view_type [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_log_batch_api_req [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_catch_mlflow_exception [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_create_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_get_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_update_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_rename_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_search_registered_models [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_get_latest_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_create_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_set_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_delete_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_get_model_version_details [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_update_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_transition_model_version_stage [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_get_model_version_download_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_search_model_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_set_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_delete_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_set_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_delete_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_get_model_version_by_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[http] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[https] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 64.1/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream] [32mPASSED | MEM 0.8/3.8 GB | DISK 64.6/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 65.1/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain] [32mPASSED | MEM 0.8/3.8 GB | DISK 65.6/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream] [32mPASSED | MEM 0.9/3.8 GB | DISK 66.1/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[None] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[dir] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[dir/b.xtx] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_default_host_creds [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[dir/b.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_create_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_complete_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_abort_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_extract_db_type_from_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB-result0] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/-result1] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/path-result2] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix-result3] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix/extra-result4] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[nondatabricks://profile:prefix-result5] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile-result6] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile/-result7] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix-result8] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix/extra-result9] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile-result10] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile/-result11] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/profile:prefix] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks://] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile: ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_is_local_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_is_local_uri_windows [33mSKIPPED[0m (Windows-...)[33m [ 34%][0m
tests/utils/test_uri.py::test_is_databricks_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_is_http_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_append_to_uri_path_joins_uri_paths_and_posixpaths_correctly [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_path_handles_special_uri_characters_in_posixpaths [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params0-https://example.com?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com-existing_key=existing_value-query_params1-https://example.com?existing_key=existing_value&new_key=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params2-https://example.com?key1=value1&key2=value2&key3=value3] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params3-https://example.com?key=value+with+spaces&key2=special%23characters] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[--query_params4-?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params5-https://example.com] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params6-https://example.com?key1=123&key2=456] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com?existing_key=existing_value--query_params7-https://example.com?existing_key=existing_value&existing_key=new_value&existing_key=new_value_2] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key-prev1=foo&prev2=bar-query_params8-s3://bucket/key?prev1=foo&prev2=bar&param1=value1&param2=value2] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key?existing_param=existing_value--query_params9-s3://bucket/key?existing_param=existing_value&new_param=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_path_preserves_uri_schemes_hosts_queries_and_fragments [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_extract_and_normalize_path [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_is_databricks_acled_artifacts_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc:port/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc:port/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://incorrect:netloc:format@databricks/path/a] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope::key_prefix@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope:key_prefix:@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[ftp://user:pass@realhost:port/path/nowhere-ftp://user:pass@realhost:port/path/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs:/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-dbfs://nondatabricks/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format/path/-dbfs://incorrect:netloc:format/path/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks-dbfs:] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/-dbfs:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-runs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-models:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-s3:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b-databricks-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks-dbfs://databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://Profile-dbfs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://profile/-dbfs://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key/random_stuff-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-nondatabricks://profile-dbfs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-databricks://Profile-runs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-nondatabricks://profile-runs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-databricks://profile-models://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-nondatabricks://Profile-models:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-databricks://Profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-nondatabricks://profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-databricks://profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-nondatabricks://Profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-databricks://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-nothing://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-databricks://OtherProfile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-nondatabricks://Profile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-databricks://OtherProfile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-nondatabricks://Profile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-databricks://OtherProfile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-nondatabricks://Profile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/pp-databricks://OtherProfile-dbfs://profile@databricks/pp] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-databricks://profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-nondatabricks://Profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b-databricks://not:legit:auth] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope::key] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs:/path/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key:@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope::key@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[s3:/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@host:port/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@databricks/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[/tmp/path-/dbfs/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path-/dbfs/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path/a/b-/dbfs/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/dbfs/123/abc-/dbfs/dbfs/123/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[some/relative/local/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[s3:/some/s3/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[C:/cool/windows/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[my/path-{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[#my/path?a=b-{cwd}/#my/path?a=b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file://myhostname/my/path-file://myhostname/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:///my/path-file:///{drive}my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:my/path-file://{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[/home/my/path-/home/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[dbfs://databricks/a/b-dbfs://databricks/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[s3://host/my/path-s3://host/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[#my/path?a=b-file://{cwd}/#my/path?a=b] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file://myhostname/my/path-file://myhostname/my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:///my/path-file:///{drive}my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[/home/my/path-file:///{drive}home/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[dbfs://databricks/a/b-dbfs://databricks/a/b] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[s3://host/my/path-s3://host/my/path] [33mSKIPPED[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/.fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[//dbfs////my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[///Volumes/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs://my///path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[/My_Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[s3a:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volume:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[/fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================
1.58s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream]
1.49s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain]
1.35s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain]
1.22s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream]
1.20s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain]
1.11s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain]
0.01s call     tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None]

(3 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m========== [32m224 passed[0m, [33m[1m9 skipped[0m, [33m[1m3 deselected[0m, [33m[1m14 warnings[0m[33m in 8.65s[0m[33m ===========[0m

2026-01-16 17:41:59,724 - src.tools.run_test - INFO - unit_test.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 236 items / 3 deselected / 233 selected

tests/server/test_handlers.py::test_health [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_get_endpoints [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_all_model_registry_endpoints_available [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_can_parse_json [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_content_type_params [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_get_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_json_string [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_invalid_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_missing_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_search_runs_default_view_type [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_log_batch_api_req [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_catch_mlflow_exception [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_create_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_get_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_update_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_rename_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_search_registered_models [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_get_latest_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_create_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_set_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_delete_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_get_model_version_details [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_update_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_transition_model_version_stage [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_get_model_version_download_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_search_model_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_set_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_delete_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_set_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_delete_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_get_model_version_by_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[http] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[https] [32mPASSED | MEM 0.6/3.8 GB | DISK 63.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 64.1/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream] [32mPASSED | MEM 0.8/3.8 GB | DISK 64.6/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 65.1/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain] [32mPASSED | MEM 0.8/3.8 GB | DISK 65.6/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream] [32mPASSED | MEM 0.9/3.8 GB | DISK 66.1/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[None] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[dir] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[dir/b.xtx] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_default_host_creds [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[dir/b.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_create_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_complete_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_abort_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_extract_db_type_from_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB-result0] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/-result1] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/path-result2] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix-result3] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix/extra-result4] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[nondatabricks://profile:prefix-result5] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile-result6] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile/-result7] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix-result8] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix/extra-result9] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile-result10] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile/-result11] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/profile:prefix] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks://] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile: ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_is_local_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_is_local_uri_windows [33mSKIPPED[0m (Windows-...)[33m [ 34%][0m
tests/utils/test_uri.py::test_is_databricks_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_is_http_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_append_to_uri_path_joins_uri_paths_and_posixpaths_correctly [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_path_handles_special_uri_characters_in_posixpaths [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params0-https://example.com?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com-existing_key=existing_value-query_params1-https://example.com?existing_key=existing_value&new_key=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params2-https://example.com?key1=value1&key2=value2&key3=value3] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params3-https://example.com?key=value+with+spaces&key2=special%23characters] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[--query_params4-?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params5-https://example.com] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params6-https://example.com?key1=123&key2=456] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com?existing_key=existing_value--query_params7-https://example.com?existing_key=existing_value&existing_key=new_value&existing_key=new_value_2] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key-prev1=foo&prev2=bar-query_params8-s3://bucket/key?prev1=foo&prev2=bar&param1=value1&param2=value2] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key?existing_param=existing_value--query_params9-s3://bucket/key?existing_param=existing_value&new_param=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_path_preserves_uri_schemes_hosts_queries_and_fragments [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_extract_and_normalize_path [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_is_databricks_acled_artifacts_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc:port/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc:port/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://incorrect:netloc:format@databricks/path/a] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope::key_prefix@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope:key_prefix:@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[ftp://user:pass@realhost:port/path/nowhere-ftp://user:pass@realhost:port/path/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs:/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-dbfs://nondatabricks/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format/path/-dbfs://incorrect:netloc:format/path/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks-dbfs:] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/-dbfs:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-runs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-models:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-s3:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b-databricks-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks-dbfs://databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://Profile-dbfs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://profile/-dbfs://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key/random_stuff-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-nondatabricks://profile-dbfs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-databricks://Profile-runs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-nondatabricks://profile-runs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-databricks://profile-models://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-nondatabricks://Profile-models:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-databricks://Profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-nondatabricks://profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-databricks://profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-nondatabricks://Profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-databricks://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-nothing://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-databricks://OtherProfile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-nondatabricks://Profile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-databricks://OtherProfile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-nondatabricks://Profile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-databricks://OtherProfile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-nondatabricks://Profile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/pp-databricks://OtherProfile-dbfs://profile@databricks/pp] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-databricks://profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-nondatabricks://Profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b-databricks://not:legit:auth] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope::key] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key ] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs:/path/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key:@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope::key@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[s3:/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@host:port/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@databricks/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[/tmp/path-/dbfs/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path-/dbfs/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path/a/b-/dbfs/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/dbfs/123/abc-/dbfs/dbfs/123/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[some/relative/local/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[s3:/some/s3/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[C:/cool/windows/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[my/path-{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[#my/path?a=b-{cwd}/#my/path?a=b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file://myhostname/my/path-file://myhostname/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:///my/path-file:///{drive}my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:my/path-file://{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[/home/my/path-/home/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[dbfs://databricks/a/b-dbfs://databricks/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[s3://host/my/path-s3://host/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[#my/path?a=b-file://{cwd}/#my/path?a=b] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file://myhostname/my/path-file://myhostname/my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:///my/path-file:///{drive}my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[/home/my/path-file:///{drive}home/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[dbfs://databricks/a/b-dbfs://databricks/a/b] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[s3://host/my/path-s3://host/my/path] [33mSKIPPED[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/.fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[//dbfs////my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[///Volumes/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs://my///path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[/My_Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[s3a:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volume:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[/fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================
1.58s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream]
1.49s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain]
1.35s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain]
1.22s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream]
1.20s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain]
1.11s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain]
0.01s call     tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None]

(3 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m========== [32m224 passed[0m, [33m[1m9 skipped[0m, [33m[1m3 deselected[0m, [33m[1m14 warnings[0m[33m in 8.65s[0m[33m ===========[0m

2026-01-16 17:41:59,727 - src.agents.base - INFO - Tool RunTest: âœ“
2026-01-16 17:41:59,727 - src.agents.base - INFO - Tool RunTest: âœ“
2026-01-16 17:42:18,526 - src.agents.base - INFO - SingleAgent executing tool: EditCode
2026-01-16 17:42:18,526 - src.agents.base - INFO - SingleAgent executing tool: EditCode
2026-01-16 17:42:18,526 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "old_code": "    exc = MlflowException(f\"Invalid path: {path}\", error_code=INVALID_PARAMETER_VALUE)\n\n    # Decode percent-encoded sequences\n    decoded_path = urllib.parse.unquote(path)\n\n    # Disallow null bytes (both literal and percent-encoded)\n    if \"\\x00\" in decoded_path or \"%00\" in path:\n        raise exc\n\n    # Disallow dangerous characters\n    if any((s in decoded_path) for s in (\"#\",)):\n        raise exc\n\n    if is_file_uri(decoded_path):\n        decoded_path = local_file_uri_to_path(decoded_path)\n\n    # Disallow alternative OS separators\n    if any((s in decoded_path) for s in _OS_ALT_SEPS):\n        raise exc\n\n    # Normalize the path and check for traversal\n    norm_path = posixpath.normpath(decoded_path)\n    if norm_path.startswith(\"..\") or \"/../\" in norm_path or norm_path == \"..\":\n        raise exc\n\n    # Disallow absolute paths\n    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "new_code": "    exc = MlflowException(\"Invalid path\", error_code=INVALID_PARAMETER_VALUE)\n\n    # Decode percent-encoded sequences\n    decoded_path = urllib.parse.unquote(path)\n\n    # Disallow null bytes (both literal and percent-encoded)\n    if \"\\x00\" in decoded_path or \"%00\" in path:\n        raise exc\n\n    # Disallow dangerous characters\n    if \"#\" in decoded_path:\n        raise exc\n\n    if is_file_uri(decoded_path):\n        decoded_path = local_file_uri_to_path(decoded_path)\n\n    # Disallow alternative OS separators\n    if any((s in decoded_path) for s in _OS_ALT_SEPS):\n        raise exc\n\n    # Normalize the path\n    norm_path = posixpath.normpath(decoded_path)\n\n    # Disallow path traversal: any '..' segment after normalization\n    if any(part == \"..\" for part in norm_path.split(\"/\")):\n        raise exc\n\n    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)\n    if norm_path.startswith(\"/\") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "fuzzy_match": true,
  "skip_validation": false
}
2026-01-16 17:42:18,526 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "old_code": "    exc = MlflowException(f\"Invalid path: {path}\", error_code=INVALID_PARAMETER_VALUE)\n\n    # Decode percent-encoded sequences\n    decoded_path = urllib.parse.unquote(path)\n\n    # Disallow null bytes (both literal and percent-encoded)\n    if \"\\x00\" in decoded_path or \"%00\" in path:\n        raise exc\n\n    # Disallow dangerous characters\n    if any((s in decoded_path) for s in (\"#\",)):\n        raise exc\n\n    if is_file_uri(decoded_path):\n        decoded_path = local_file_uri_to_path(decoded_path)\n\n    # Disallow alternative OS separators\n    if any((s in decoded_path) for s in _OS_ALT_SEPS):\n        raise exc\n\n    # Normalize the path and check for traversal\n    norm_path = posixpath.normpath(decoded_path)\n    if norm_path.startswith(\"..\") or \"/../\" in norm_path or norm_path == \"..\":\n        raise exc\n\n    # Disallow absolute paths\n    if pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "new_code": "    exc = MlflowException(\"Invalid path\", error_code=INVALID_PARAMETER_VALUE)\n\n    # Decode percent-encoded sequences\n    decoded_path = urllib.parse.unquote(path)\n\n    # Disallow null bytes (both literal and percent-encoded)\n    if \"\\x00\" in decoded_path or \"%00\" in path:\n        raise exc\n\n    # Disallow dangerous characters\n    if \"#\" in decoded_path:\n        raise exc\n\n    if is_file_uri(decoded_path):\n        decoded_path = local_file_uri_to_path(decoded_path)\n\n    # Disallow alternative OS separators\n    if any((s in decoded_path) for s in _OS_ALT_SEPS):\n        raise exc\n\n    # Normalize the path\n    norm_path = posixpath.normpath(decoded_path)\n\n    # Disallow path traversal: any '..' segment after normalization\n    if any(part == \"..\" for part in norm_path.split(\"/\")):\n        raise exc\n\n    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)\n    if norm_path.startswith(\"/\") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "fuzzy_match": true,
  "skip_validation": false
}
2026-01-16 17:42:18,682 - src.tools.edit_code - INFO - EditCodeTool: Writing 17479 chars to mlflow/utils/uri.py (match_type=exact)
2026-01-16 17:42:18,682 - src.tools.edit_code - INFO - EditCodeTool: Writing 17479 chars to mlflow/utils/uri.py (match_type=exact)
2026-01-16 17:42:18,824 - src.agents.base - INFO - Tool EditCode: âœ“
2026-01-16 17:42:18,824 - src.agents.base - INFO - Tool EditCode: âœ“
2026-01-16 17:42:20,157 - src.agents.base - INFO - SingleAgent executing tool: RunTest
2026-01-16 17:42:20,157 - src.agents.base - INFO - SingleAgent executing tool: RunTest
2026-01-16 17:42:20,157 - src.agents.base - INFO - Tool arguments:
{
  "run_prepare": true,
  "timeout": 180,
  "include_paths": [
    "mlflow/utils/uri.py"
  ],
  "run_unittest": true
}
2026-01-16 17:42:20,157 - src.agents.base - INFO - Tool arguments:
{
  "run_prepare": true,
  "timeout": 180,
  "include_paths": [
    "mlflow/utils/uri.py"
  ],
  "run_unittest": true
}
2026-01-16 17:42:20,481 - src.tools.run_test - INFO - Extracted 4 file paths from /workspace/test.patch: ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:20,481 - src.tools.run_test - INFO - Extracted 4 file paths from /workspace/test.patch: ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:20,481 - src.tools.run_test - INFO - Generating git diff for fix.patch
2026-01-16 17:42:20,481 - src.tools.run_test - INFO - Generating git diff for fix.patch
2026-01-16 17:42:20,481 - src.tools.run_test - INFO -   include_paths: ['mlflow/utils/uri.py']
2026-01-16 17:42:20,481 - src.tools.run_test - INFO -   include_paths: ['mlflow/utils/uri.py']
2026-01-16 17:42:20,481 - src.tools.run_test - INFO -   exclude_paths (from test.patch): ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:20,481 - src.tools.run_test - INFO -   exclude_paths (from test.patch): ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:20,482 - src.tools.run_test - INFO -   git diff command: git diff HEAD -- 'mlflow/utils/uri.py' ':(exclude)tests/utils/test_uri.py' ':(exclude)tests/tracking/test_rest_tracking.py' ':(exclude)tests/store/artifact/test_http_artifact_repo.py' ':(exclude)tests/server/test_handlers.py'
2026-01-16 17:42:20,482 - src.tools.run_test - INFO -   git diff command: git diff HEAD -- 'mlflow/utils/uri.py' ':(exclude)tests/utils/test_uri.py' ':(exclude)tests/tracking/test_rest_tracking.py' ':(exclude)tests/store/artifact/test_http_artifact_repo.py' ':(exclude)tests/server/test_handlers.py'
2026-01-16 17:42:20,641 - src.tools.run_test - INFO -   Generated patch: 1991 bytes, 54 lines
2026-01-16 17:42:20,641 - src.tools.run_test - INFO -   Generated patch: 1991 bytes, 54 lines
2026-01-16 17:42:20,641 - src.tools.run_test - INFO -   Patch content:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..889c05d 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,38 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc

2026-01-16 17:42:20,641 - src.tools.run_test - INFO -   Patch content:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..889c05d 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,38 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc

2026-01-16 17:42:20,731 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:20,731 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:21,431 - src.tools.run_test - INFO - Running fix-run.sh for PoC validation...
2026-01-16 17:42:21,431 - src.tools.run_test - INFO - Running fix-run.sh for PoC validation...
2026-01-16 17:42:21,521 - src.tools.run_test - INFO - Patch being tested:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..889c05d 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,38 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc


2026-01-16 17:42:21,521 - src.tools.run_test - INFO - Patch being tested:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..889c05d 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,38 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc


2026-01-16 17:42:24,378 - src.tools.run_test - INFO - fix-run.sh completed with exit code 1
2026-01-16 17:42:24,378 - src.tools.run_test - INFO - fix-run.sh completed with exit code 1
2026-01-16 17:42:24,379 - src.tools.run_test - INFO - fix-run.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 26 items

tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [  7%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 11%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 15%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 19%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 26%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 30%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 34%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 38%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 42%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 46%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[./../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 50%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 53%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 57%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a#/..//tmp] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 61%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a%23/..//tmp/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 65%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 69%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 73%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.html] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 76%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.txt] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 80%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.php] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 84%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.asp] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 88%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 92%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 96%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] _[0m

enable_serve_artifacts = None, path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
>       response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m

enable_serve_artifacts = None
path       = 'path/../to/file'

[1m[31mtests/server/test_handlers.py[0m:800: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31mmlflow/server/handlers.py[0m:497: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc44da670>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:519: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc44da5e0>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:1961: in _delete_artifact_mlflow_artifacts
    [0m_get_request_message(DeleteArtifact())[90m[39;49;00m
        artifact_path = 'path/../to/file'
[1m[31mmlflow/server/handlers.py[0m:413: in _get_request_message
    [0m[94mif[39;49;00m flask_request.method == [33m"[39;49;00m[33mGET[39;49;00m[33m"[39;49;00m [95mand[39;49;00m [96mlen[39;49;00m(flask_request.query_string) > [94m0[39;49;00m:[90m[39;49;00m
        flask_request = <LocalProxy unbound>
        parser     = <module 'querystring_parser.parser' from '/workspace/PoC_env/CVE-2023-6831/lib/python3.8/site-packages/querystring_parser/parser.py'>
        request_message = 
        schema     = None
[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:318: in __get__
    [0mobj = instance._get_current_object()[90m[39;49;00m
        instance   = <LocalProxy unbound>
        owner      = <class 'werkzeug.local.LocalProxy'>
        self       = proxy __getattr__
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[94mdef[39;49;00m[90m [39;49;00m[92m_get_current_object[39;49;00m() -> T:[90m[39;49;00m
        [94mtry[39;49;00m:[90m[39;49;00m
            obj = local.get()[90m[39;49;00m
        [94mexcept[39;49;00m [96mLookupError[39;49;00m:[90m[39;49;00m
>           [94mraise[39;49;00m [96mRuntimeError[39;49;00m(unbound_message) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
[1m[31mE           RuntimeError: Working outside of request context.[0m
[1m[31mE           [0m
[1m[31mE           This typically means that you attempted to use functionality that needed[0m
[1m[31mE           an active HTTP request. Consult the documentation on testing for[0m
[1m[31mE           information about how to avoid this problem.[0m

get_name   = operator.attrgetter('request')
local      = <ContextVar name='flask.request_ctx' at 0x7fffc492a2c0>
unbound_message = 'Working outside of request context.\n\nThis typically means that you attempted to use functionality that needed\nan active HTTP request. Consult the documentation on testing for\ninformation about how to avoid this problem.'

[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:519: RuntimeError
[31m[1m_______________ test_validate_path_is_safe_bad[path/../to/file] ________________[0m

path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.skipif(is_windows(), reason=[33m"[39;49;00m[33mThis test does not pass on Windows[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
    [37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m./../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a#/..//tmp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a[39;49;00m[33m%[39;49;00m[33m23/..//tmp/[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.html[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.txt[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.php[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.asp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [90m# Encoded paths with '..'[39;49;00m[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_validate_path_is_safe_bad[39;49;00m(path):[90m[39;49;00m
        [94mwith[39;49;00m pytest.raises(MlflowException, match=[33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m):[90m[39;49;00m
>           validate_path_is_safe(path)[90m[39;49;00m
[1m[31mE           Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>[0m

path       = 'path/../to/file'

[1m[31mtests/utils/test_uri.py[0m:780: Failed
============================= slowest 10 durations =============================

(10 durations < 0.005s hidden.  Use -vv to show these durations.)
======================= command to run failed test cases =======================
pytest 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file]' 'tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file]'

[36m[1m=========================== short test summary info ============================[0m
[31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file][0m - RuntimeError: Working outside of request context.
[31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m tests/utils/test_uri.py::[1mtest_validate_path_is_safe_bad[path/../to/file][0m - Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>
[31m================== [31m[1m2 failed[0m, [32m24 passed[0m, [33m14 warnings[0m[31m in 0.47s[0m[31m ===================[0m

2026-01-16 17:42:24,379 - src.tools.run_test - INFO - fix-run.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 26 items

tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [  7%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 11%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 15%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 19%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 26%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 30%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 34%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 38%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 42%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 46%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[./../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 50%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file] [31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 53%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 57%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a#/..//tmp] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 61%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a%23/..//tmp/] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 65%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 69%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 73%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.html] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 76%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.txt] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 80%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.php] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 84%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.asp] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 88%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 92%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [ 96%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m_ test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] _[0m

enable_serve_artifacts = None, path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[39;49;00m(enable_serve_artifacts, path):[90m[39;49;00m
>       response = _delete_artifact_mlflow_artifacts(path)[90m[39;49;00m

enable_serve_artifacts = None
path       = 'path/../to/file'

[1m[31mtests/server/test_handlers.py[0m:800: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31mmlflow/server/handlers.py[0m:497: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc44da670>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:519: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
        args       = ('path/../to/file',)
        func       = <function _delete_artifact_mlflow_artifacts at 0x7fffc44da5e0>
        kwargs     = {}
[1m[31mmlflow/server/handlers.py[0m:1961: in _delete_artifact_mlflow_artifacts
    [0m_get_request_message(DeleteArtifact())[90m[39;49;00m
        artifact_path = 'path/../to/file'
[1m[31mmlflow/server/handlers.py[0m:413: in _get_request_message
    [0m[94mif[39;49;00m flask_request.method == [33m"[39;49;00m[33mGET[39;49;00m[33m"[39;49;00m [95mand[39;49;00m [96mlen[39;49;00m(flask_request.query_string) > [94m0[39;49;00m:[90m[39;49;00m
        flask_request = <LocalProxy unbound>
        parser     = <module 'querystring_parser.parser' from '/workspace/PoC_env/CVE-2023-6831/lib/python3.8/site-packages/querystring_parser/parser.py'>
        request_message = 
        schema     = None
[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:318: in __get__
    [0mobj = instance._get_current_object()[90m[39;49;00m
        instance   = <LocalProxy unbound>
        owner      = <class 'werkzeug.local.LocalProxy'>
        self       = proxy __getattr__
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    [0m[94mdef[39;49;00m[90m [39;49;00m[92m_get_current_object[39;49;00m() -> T:[90m[39;49;00m
        [94mtry[39;49;00m:[90m[39;49;00m
            obj = local.get()[90m[39;49;00m
        [94mexcept[39;49;00m [96mLookupError[39;49;00m:[90m[39;49;00m
>           [94mraise[39;49;00m [96mRuntimeError[39;49;00m(unbound_message) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
[1m[31mE           RuntimeError: Working outside of request context.[0m
[1m[31mE           [0m
[1m[31mE           This typically means that you attempted to use functionality that needed[0m
[1m[31mE           an active HTTP request. Consult the documentation on testing for[0m
[1m[31mE           information about how to avoid this problem.[0m

get_name   = operator.attrgetter('request')
local      = <ContextVar name='flask.request_ctx' at 0x7fffc492a2c0>
unbound_message = 'Working outside of request context.\n\nThis typically means that you attempted to use functionality that needed\nan active HTTP request. Consult the documentation on testing for\ninformation about how to avoid this problem.'

[1m[31m../PoC_env/CVE-2023-6831/lib/python3.8/site-packages/werkzeug/local.py[0m:519: RuntimeError
[31m[1m_______________ test_validate_path_is_safe_bad[path/../to/file] ________________[0m

path = 'path/../to/file'

    [0m[37m@pytest[39;49;00m.mark.skipif(is_windows(), reason=[33m"[39;49;00m[33mThis test does not pass on Windows[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
    [37m@pytest[39;49;00m.mark.parametrize([90m[39;49;00m
        [33m"[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        [[90m[39;49;00m
            [33m"[39;49;00m[33m/path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m../../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m./../path[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mpath/../../to/file[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a#/..//tmp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33mfile://a[39;49;00m[33m%[39;49;00m[33m23/..//tmp/[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.jpg[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.html[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.txt[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.php[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/etc/passwd[39;49;00m[33m%[39;49;00m[33m00.asp[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m/file://etc/passwd[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [90m# Encoded paths with '..'[39;49;00m[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33m%2E[39;49;00m[33m%2E[39;49;00m[33m%2F[39;49;00m[33mpath[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        ],[90m[39;49;00m
    )[90m[39;49;00m
    [94mdef[39;49;00m[90m [39;49;00m[92mtest_validate_path_is_safe_bad[39;49;00m(path):[90m[39;49;00m
        [94mwith[39;49;00m pytest.raises(MlflowException, match=[33m"[39;49;00m[33mInvalid path[39;49;00m[33m"[39;49;00m):[90m[39;49;00m
>           validate_path_is_safe(path)[90m[39;49;00m
[1m[31mE           Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>[0m

path       = 'path/../to/file'

[1m[31mtests/utils/test_uri.py[0m:780: Failed
============================= slowest 10 durations =============================

(10 durations < 0.005s hidden.  Use -vv to show these durations.)
======================= command to run failed test cases =======================
pytest 'tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file]' 'tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file]'

[36m[1m=========================== short test summary info ============================[0m
[31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m tests/server/test_handlers.py::[1mtest_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file][0m - RuntimeError: Working outside of request context.
[31mFAILED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m tests/utils/test_uri.py::[1mtest_validate_path_is_safe_bad[path/../to/file][0m - Failed: DID NOT RAISE <class 'mlflow.exceptions.MlflowException'>
[31m================== [31m[1m2 failed[0m, [32m24 passed[0m, [33m14 warnings[0m[31m in 0.47s[0m[31m ===================[0m

2026-01-16 17:42:24,465 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:24,465 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:25,065 - src.tools.run_test - INFO - Running unit_test.sh for regression testing...
2026-01-16 17:42:25,065 - src.tools.run_test - INFO - Running unit_test.sh for regression testing...
2026-01-16 17:42:33,687 - src.tools.run_test - INFO - unit_test.sh completed with exit code 0
2026-01-16 17:42:33,687 - src.tools.run_test - INFO - unit_test.sh completed with exit code 0
2026-01-16 17:42:33,688 - src.tools.run_test - INFO - unit_test.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 236 items / 3 deselected / 233 selected

tests/server/test_handlers.py::test_health [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_get_endpoints [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_all_model_registry_endpoints_available [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_can_parse_json [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_content_type_params [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_get_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_json_string [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_invalid_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_missing_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_search_runs_default_view_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_log_batch_api_req [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_catch_mlflow_exception [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_create_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_get_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_update_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_rename_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_search_registered_models [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_get_latest_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_create_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_set_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_delete_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_get_model_version_details [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_update_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_transition_model_version_stage [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_get_model_version_download_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_search_model_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_set_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_delete_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_set_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_delete_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_get_model_version_by_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[http] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[https] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 67.1/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream] [32mPASSED | MEM 0.8/3.8 GB | DISK 67.6/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 68.0/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain] [32mPASSED | MEM 0.8/3.8 GB | DISK 68.5/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream] [32mPASSED | MEM 0.9/3.8 GB | DISK 69.0/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[None] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[dir] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[dir/b.xtx] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_default_host_creds [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[dir/b.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_create_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_complete_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_abort_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_extract_db_type_from_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB-result0] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/-result1] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/path-result2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix-result3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix/extra-result4] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[nondatabricks://profile:prefix-result5] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile-result6] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile/-result7] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix-result8] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix/extra-result9] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile-result10] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile/-result11] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/profile:prefix] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks://] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile: ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_is_local_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_is_local_uri_windows [33mSKIPPED[0m (Windows-...)[33m [ 34%][0m
tests/utils/test_uri.py::test_is_databricks_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_is_http_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_append_to_uri_path_joins_uri_paths_and_posixpaths_correctly [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_path_handles_special_uri_characters_in_posixpaths [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params0-https://example.com?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com-existing_key=existing_value-query_params1-https://example.com?existing_key=existing_value&new_key=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params2-https://example.com?key1=value1&key2=value2&key3=value3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params3-https://example.com?key=value+with+spaces&key2=special%23characters] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[--query_params4-?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params5-https://example.com] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params6-https://example.com?key1=123&key2=456] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com?existing_key=existing_value--query_params7-https://example.com?existing_key=existing_value&existing_key=new_value&existing_key=new_value_2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key-prev1=foo&prev2=bar-query_params8-s3://bucket/key?prev1=foo&prev2=bar&param1=value1&param2=value2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key?existing_param=existing_value--query_params9-s3://bucket/key?existing_param=existing_value&new_param=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_path_preserves_uri_schemes_hosts_queries_and_fragments [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_extract_and_normalize_path [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_is_databricks_acled_artifacts_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc:port/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc:port/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://incorrect:netloc:format@databricks/path/a] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope::key_prefix@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope:key_prefix:@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[ftp://user:pass@realhost:port/path/nowhere-ftp://user:pass@realhost:port/path/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs:/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-dbfs://nondatabricks/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format/path/-dbfs://incorrect:netloc:format/path/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks-dbfs:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/-dbfs:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-runs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-models:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-s3:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b-databricks-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks-dbfs://databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://Profile-dbfs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://profile/-dbfs://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key/random_stuff-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-nondatabricks://profile-dbfs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-databricks://Profile-runs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-nondatabricks://profile-runs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-databricks://profile-models://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-nondatabricks://Profile-models:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-databricks://Profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-nondatabricks://profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-databricks://profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-nondatabricks://Profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-databricks://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-nothing://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-databricks://OtherProfile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-nondatabricks://Profile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-databricks://OtherProfile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-nondatabricks://Profile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-databricks://OtherProfile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-nondatabricks://Profile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/pp-databricks://OtherProfile-dbfs://profile@databricks/pp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-databricks://profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-nondatabricks://Profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b-databricks://not:legit:auth] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope::key] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs:/path/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key:@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope::key@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[s3:/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@host:port/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@databricks/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[/tmp/path-/dbfs/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path-/dbfs/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path/a/b-/dbfs/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/dbfs/123/abc-/dbfs/dbfs/123/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[some/relative/local/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[s3:/some/s3/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[C:/cool/windows/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[my/path-{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[#my/path?a=b-{cwd}/#my/path?a=b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file://myhostname/my/path-file://myhostname/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:///my/path-file:///{drive}my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:my/path-file://{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[/home/my/path-/home/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[dbfs://databricks/a/b-dbfs://databricks/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[s3://host/my/path-s3://host/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[#my/path?a=b-file://{cwd}/#my/path?a=b] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file://myhostname/my/path-file://myhostname/my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:///my/path-file:///{drive}my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[/home/my/path-file:///{drive}home/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[dbfs://databricks/a/b-dbfs://databricks/a/b] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[s3://host/my/path-s3://host/my/path] [33mSKIPPED[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/.fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[//dbfs////my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[///Volumes/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs://my///path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[/My_Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[s3a:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volume:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[/fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================
1.30s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream]
1.14s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain]
1.11s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain]
0.91s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream]
0.88s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain]
0.59s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain]
0.01s call     tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None]

(3 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m========== [32m224 passed[0m, [33m[1m9 skipped[0m, [33m[1m3 deselected[0m, [33m[1m14 warnings[0m[33m in 6.62s[0m[33m ===========[0m

2026-01-16 17:42:33,688 - src.tools.run_test - INFO - unit_test.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 236 items / 3 deselected / 233 selected

tests/server/test_handlers.py::test_health [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_get_endpoints [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_all_model_registry_endpoints_available [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_can_parse_json [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_content_type_params [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_get_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_json_string [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_invalid_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_missing_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_search_runs_default_view_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_log_batch_api_req [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_catch_mlflow_exception [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_create_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_get_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_update_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_rename_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_search_registered_models [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_get_latest_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_create_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_set_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_delete_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_get_model_version_details [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_update_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_transition_model_version_stage [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_get_model_version_download_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_search_model_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_set_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_delete_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_set_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_delete_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_get_model_version_by_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[http] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[https] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 67.1/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream] [32mPASSED | MEM 0.8/3.8 GB | DISK 67.6/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 68.0/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain] [32mPASSED | MEM 0.8/3.8 GB | DISK 68.5/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream] [32mPASSED | MEM 0.9/3.8 GB | DISK 69.0/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[None] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[dir] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[dir/b.xtx] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_default_host_creds [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[dir/b.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_create_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_complete_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_abort_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_extract_db_type_from_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB-result0] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/-result1] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/path-result2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix-result3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix/extra-result4] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[nondatabricks://profile:prefix-result5] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile-result6] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile/-result7] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix-result8] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix/extra-result9] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile-result10] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile/-result11] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/profile:prefix] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks://] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile: ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_is_local_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_is_local_uri_windows [33mSKIPPED[0m (Windows-...)[33m [ 34%][0m
tests/utils/test_uri.py::test_is_databricks_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_is_http_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_append_to_uri_path_joins_uri_paths_and_posixpaths_correctly [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_path_handles_special_uri_characters_in_posixpaths [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params0-https://example.com?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com-existing_key=existing_value-query_params1-https://example.com?existing_key=existing_value&new_key=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params2-https://example.com?key1=value1&key2=value2&key3=value3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params3-https://example.com?key=value+with+spaces&key2=special%23characters] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[--query_params4-?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params5-https://example.com] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params6-https://example.com?key1=123&key2=456] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com?existing_key=existing_value--query_params7-https://example.com?existing_key=existing_value&existing_key=new_value&existing_key=new_value_2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key-prev1=foo&prev2=bar-query_params8-s3://bucket/key?prev1=foo&prev2=bar&param1=value1&param2=value2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key?existing_param=existing_value--query_params9-s3://bucket/key?existing_param=existing_value&new_param=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_path_preserves_uri_schemes_hosts_queries_and_fragments [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_extract_and_normalize_path [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_is_databricks_acled_artifacts_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc:port/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc:port/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://incorrect:netloc:format@databricks/path/a] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope::key_prefix@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope:key_prefix:@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[ftp://user:pass@realhost:port/path/nowhere-ftp://user:pass@realhost:port/path/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs:/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-dbfs://nondatabricks/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format/path/-dbfs://incorrect:netloc:format/path/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks-dbfs:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/-dbfs:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-runs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-models:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-s3:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b-databricks-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks-dbfs://databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://Profile-dbfs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://profile/-dbfs://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key/random_stuff-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-nondatabricks://profile-dbfs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-databricks://Profile-runs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-nondatabricks://profile-runs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-databricks://profile-models://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-nondatabricks://Profile-models:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-databricks://Profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-nondatabricks://profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-databricks://profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-nondatabricks://Profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-databricks://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-nothing://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-databricks://OtherProfile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-nondatabricks://Profile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-databricks://OtherProfile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-nondatabricks://Profile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-databricks://OtherProfile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-nondatabricks://Profile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/pp-databricks://OtherProfile-dbfs://profile@databricks/pp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-databricks://profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-nondatabricks://Profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b-databricks://not:legit:auth] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope::key] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs:/path/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key:@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope::key@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[s3:/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@host:port/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@databricks/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[/tmp/path-/dbfs/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path-/dbfs/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path/a/b-/dbfs/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/dbfs/123/abc-/dbfs/dbfs/123/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[some/relative/local/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[s3:/some/s3/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[C:/cool/windows/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[my/path-{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[#my/path?a=b-{cwd}/#my/path?a=b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file://myhostname/my/path-file://myhostname/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:///my/path-file:///{drive}my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:my/path-file://{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[/home/my/path-/home/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[dbfs://databricks/a/b-dbfs://databricks/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[s3://host/my/path-s3://host/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[#my/path?a=b-file://{cwd}/#my/path?a=b] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file://myhostname/my/path-file://myhostname/my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:///my/path-file:///{drive}my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[/home/my/path-file:///{drive}home/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[dbfs://databricks/a/b-dbfs://databricks/a/b] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[s3://host/my/path-s3://host/my/path] [33mSKIPPED[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/.fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[//dbfs////my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[///Volumes/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs://my///path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[/My_Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[s3a:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volume:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[/fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================
1.30s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream]
1.14s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain]
1.11s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain]
0.91s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream]
0.88s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain]
0.59s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain]
0.01s call     tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None]

(3 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m========== [32m224 passed[0m, [33m[1m9 skipped[0m, [33m[1m3 deselected[0m, [33m[1m14 warnings[0m[33m in 6.62s[0m[33m ===========[0m

2026-01-16 17:42:33,691 - src.agents.base - INFO - Tool RunTest: âœ“
2026-01-16 17:42:33,691 - src.agents.base - INFO - Tool RunTest: âœ“
2026-01-16 17:42:48,275 - src.agents.base - INFO - SingleAgent executing tool: EditCode
2026-01-16 17:42:48,275 - src.agents.base - INFO - SingleAgent executing tool: EditCode
2026-01-16 17:42:48,279 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "old_code": "    # Normalize the path\n    norm_path = posixpath.normpath(decoded_path)\n\n    # Disallow path traversal: any '..' segment after normalization\n    if any(part == \"..\" for part in norm_path.split(\"/\")):\n        raise exc\n\n    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)\n    if norm_path.startswith(\"/\") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "new_code": "    # Disallow path traversal: any '..' segment in the original decoded path\n    if any(part == \"..\" for part in decoded_path.split(\"/\")):\n        raise exc\n\n    # Normalize the path\n    norm_path = posixpath.normpath(decoded_path)\n\n    # Disallow path traversal: any '..' segment after normalization\n    if any(part == \"..\" for part in norm_path.split(\"/\")):\n        raise exc\n\n    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)\n    if norm_path.startswith(\"/\") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "fuzzy_match": true,
  "skip_validation": false
}
2026-01-16 17:42:48,279 - src.agents.base - INFO - Tool arguments:
{
  "file_path": "mlflow/utils/uri.py",
  "old_code": "    # Normalize the path\n    norm_path = posixpath.normpath(decoded_path)\n\n    # Disallow path traversal: any '..' segment after normalization\n    if any(part == \"..\" for part in norm_path.split(\"/\")):\n        raise exc\n\n    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)\n    if norm_path.startswith(\"/\") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "new_code": "    # Disallow path traversal: any '..' segment in the original decoded path\n    if any(part == \"..\" for part in decoded_path.split(\"/\")):\n        raise exc\n\n    # Normalize the path\n    norm_path = posixpath.normpath(decoded_path)\n\n    # Disallow path traversal: any '..' segment after normalization\n    if any(part == \"..\" for part in norm_path.split(\"/\")):\n        raise exc\n\n    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)\n    if norm_path.startswith(\"/\") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():\n        raise exc\n    if is_windows() and len(norm_path) >= 2 and norm_path[1] == \":\":\n        raise exc\n",
  "fuzzy_match": true,
  "skip_validation": false
}
2026-01-16 17:42:48,452 - src.tools.edit_code - INFO - EditCodeTool: Writing 17637 chars to mlflow/utils/uri.py (match_type=exact)
2026-01-16 17:42:48,452 - src.tools.edit_code - INFO - EditCodeTool: Writing 17637 chars to mlflow/utils/uri.py (match_type=exact)
2026-01-16 17:42:48,602 - src.agents.base - INFO - Tool EditCode: âœ“
2026-01-16 17:42:48,602 - src.agents.base - INFO - Tool EditCode: âœ“
2026-01-16 17:42:50,486 - src.agents.base - INFO - SingleAgent executing tool: RunTest
2026-01-16 17:42:50,486 - src.agents.base - INFO - SingleAgent executing tool: RunTest
2026-01-16 17:42:50,486 - src.agents.base - INFO - Tool arguments:
{
  "run_prepare": true,
  "timeout": 180,
  "include_paths": [
    "mlflow/utils/uri.py"
  ],
  "run_unittest": true
}
2026-01-16 17:42:50,486 - src.agents.base - INFO - Tool arguments:
{
  "run_prepare": true,
  "timeout": 180,
  "include_paths": [
    "mlflow/utils/uri.py"
  ],
  "run_unittest": true
}
2026-01-16 17:42:50,828 - src.tools.run_test - INFO - Extracted 4 file paths from /workspace/test.patch: ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:50,828 - src.tools.run_test - INFO - Extracted 4 file paths from /workspace/test.patch: ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:50,829 - src.tools.run_test - INFO - Generating git diff for fix.patch
2026-01-16 17:42:50,829 - src.tools.run_test - INFO - Generating git diff for fix.patch
2026-01-16 17:42:50,829 - src.tools.run_test - INFO -   include_paths: ['mlflow/utils/uri.py']
2026-01-16 17:42:50,829 - src.tools.run_test - INFO -   include_paths: ['mlflow/utils/uri.py']
2026-01-16 17:42:50,829 - src.tools.run_test - INFO -   exclude_paths (from test.patch): ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:50,829 - src.tools.run_test - INFO -   exclude_paths (from test.patch): ['tests/utils/test_uri.py', 'tests/tracking/test_rest_tracking.py', 'tests/store/artifact/test_http_artifact_repo.py', 'tests/server/test_handlers.py']
2026-01-16 17:42:50,829 - src.tools.run_test - INFO -   git diff command: git diff HEAD -- 'mlflow/utils/uri.py' ':(exclude)tests/utils/test_uri.py' ':(exclude)tests/tracking/test_rest_tracking.py' ':(exclude)tests/store/artifact/test_http_artifact_repo.py' ':(exclude)tests/server/test_handlers.py'
2026-01-16 17:42:50,829 - src.tools.run_test - INFO -   git diff command: git diff HEAD -- 'mlflow/utils/uri.py' ':(exclude)tests/utils/test_uri.py' ':(exclude)tests/tracking/test_rest_tracking.py' ':(exclude)tests/store/artifact/test_http_artifact_repo.py' ':(exclude)tests/server/test_handlers.py'
2026-01-16 17:42:50,971 - src.tools.run_test - INFO -   Generated patch: 2153 bytes, 58 lines
2026-01-16 17:42:50,971 - src.tools.run_test - INFO -   Generated patch: 2153 bytes, 58 lines
2026-01-16 17:42:50,971 - src.tools.run_test - INFO -   Patch content:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..c7bccfc 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,42 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Disallow path traversal: any '..' segment in the original decoded path
+    if any(part == ".." for part in decoded_path.split("/")):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc

2026-01-16 17:42:50,971 - src.tools.run_test - INFO -   Patch content:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..c7bccfc 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,42 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Disallow path traversal: any '..' segment in the original decoded path
+    if any(part == ".." for part in decoded_path.split("/")):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc

2026-01-16 17:42:51,068 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:51,068 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:51,676 - src.tools.run_test - INFO - Running fix-run.sh for PoC validation...
2026-01-16 17:42:51,676 - src.tools.run_test - INFO - Running fix-run.sh for PoC validation...
2026-01-16 17:42:51,780 - src.tools.run_test - INFO - Patch being tested:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..c7bccfc 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,42 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Disallow path traversal: any '..' segment in the original decoded path
+    if any(part == ".." for part in decoded_path.split("/")):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc


2026-01-16 17:42:51,780 - src.tools.run_test - INFO - Patch being tested:
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b..c7bccfc 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -429,18 +429,42 @@ def validate_path_is_safe(path):
         not be an absolute path
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
+    import urllib.parse
+    import posixpath
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
-    if any((s in path) for s in ("#", "%23")):
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
+
+    # Decode percent-encoded sequences
+    decoded_path = urllib.parse.unquote(path)
+
+    # Disallow null bytes (both literal and percent-encoded)
+    if "\x00" in decoded_path or "%00" in path:
         raise exc
 
-    if is_file_uri(path):
-        path = local_file_uri_to_path(path)
-    if (
-        any((s in path) for s in _OS_ALT_SEPS)
-        or ".." in path.split("/")
-        or pathlib.PureWindowsPath(path).is_absolute()
-        or pathlib.PurePosixPath(path).is_absolute()
-        or (is_windows() and len(path) >= 2 and path[1] == ":")
-    ):
+    # Disallow dangerous characters
+    if "#" in decoded_path:
+        raise exc
+
+    if is_file_uri(decoded_path):
+        decoded_path = local_file_uri_to_path(decoded_path)
+
+    # Disallow alternative OS separators
+    if any((s in decoded_path) for s in _OS_ALT_SEPS):
+        raise exc
+
+    # Disallow path traversal: any '..' segment in the original decoded path
+    if any(part == ".." for part in decoded_path.split("/")):
+        raise exc
+
+    # Normalize the path
+    norm_path = posixpath.normpath(decoded_path)
+
+    # Disallow path traversal: any '..' segment after normalization
+    if any(part == ".." for part in norm_path.split("/")):
+        raise exc
+
+    # Disallow absolute paths (start with / or are absolute for Windows/POSIX)
+    if norm_path.startswith("/") or pathlib.PureWindowsPath(norm_path).is_absolute() or pathlib.PurePosixPath(norm_path).is_absolute():
+        raise exc
+    if is_windows() and len(norm_path) >= 2 and norm_path[1] == ":":
         raise exc


2026-01-16 17:42:54,751 - src.tools.run_test - INFO - fix-run.sh completed with exit code 0
2026-01-16 17:42:54,751 - src.tools.run_test - INFO - fix-run.sh completed with exit code 0
2026-01-16 17:42:54,752 - src.tools.run_test - INFO - fix-run.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 26 items

tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 15%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[./../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a#/..//tmp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a%23/..//tmp/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.html] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.txt] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.php] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.asp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================

(10 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m======================= [32m26 passed[0m, [33m[1m14 warnings[0m[33m in 0.33s[0m[33m ========================[0m

2026-01-16 17:42:54,752 - src.tools.run_test - INFO - fix-run.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 26 items

tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[path/../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 15%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/server/test_handlers.py::test_delete_artifact_mlflow_artifacts_throws_for_malicious_path[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts_malicious_path[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[../../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[./../path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[path/../../to/file] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a#/..//tmp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[file://a%23/..//tmp/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.jpg] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.html] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.txt] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.php] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/etc/passwd%00.asp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[/file://etc/passwd] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_validate_path_is_safe_bad[%2E%2E%2F%2E%2E%2Fpath] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================

(10 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m======================= [32m26 passed[0m, [33m[1m14 warnings[0m[33m in 0.33s[0m[33m ========================[0m

2026-01-16 17:42:54,848 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:54,848 - src.tools.run_test - INFO - Running prepare.sh to reset repository...
2026-01-16 17:42:55,566 - src.tools.run_test - INFO - Running unit_test.sh for regression testing...
2026-01-16 17:42:55,566 - src.tools.run_test - INFO - Running unit_test.sh for regression testing...
2026-01-16 17:43:05,563 - src.tools.run_test - INFO - unit_test.sh completed with exit code 0
2026-01-16 17:43:05,563 - src.tools.run_test - INFO - unit_test.sh completed with exit code 0
2026-01-16 17:43:05,567 - src.tools.run_test - INFO - unit_test.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 236 items / 3 deselected / 233 selected

tests/server/test_handlers.py::test_health [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_get_endpoints [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_all_model_registry_endpoints_available [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_can_parse_json [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_content_type_params [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_get_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_json_string [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_invalid_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_missing_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_search_runs_default_view_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_log_batch_api_req [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_catch_mlflow_exception [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_create_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_get_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_update_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_rename_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_search_registered_models [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_get_latest_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_create_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_set_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_delete_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_get_model_version_details [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_update_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_transition_model_version_stage [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_get_model_version_download_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_search_model_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_set_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_delete_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_set_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_delete_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_get_model_version_by_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[http] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[https] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 67.1/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream] [32mPASSED | MEM 0.8/3.8 GB | DISK 67.6/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 68.0/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain] [32mPASSED | MEM 0.8/3.8 GB | DISK 68.5/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream] [32mPASSED | MEM 0.9/3.8 GB | DISK 69.0/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[None] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[dir] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[dir/b.xtx] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_default_host_creds [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[dir/b.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_create_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_complete_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_abort_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_extract_db_type_from_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB-result0] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/-result1] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/path-result2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix-result3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix/extra-result4] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[nondatabricks://profile:prefix-result5] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile-result6] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile/-result7] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix-result8] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix/extra-result9] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile-result10] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile/-result11] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/profile:prefix] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks://] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile: ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_is_local_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_is_local_uri_windows [33mSKIPPED[0m (Windows-...)[33m [ 34%][0m
tests/utils/test_uri.py::test_is_databricks_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_is_http_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_append_to_uri_path_joins_uri_paths_and_posixpaths_correctly [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_path_handles_special_uri_characters_in_posixpaths [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params0-https://example.com?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com-existing_key=existing_value-query_params1-https://example.com?existing_key=existing_value&new_key=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params2-https://example.com?key1=value1&key2=value2&key3=value3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params3-https://example.com?key=value+with+spaces&key2=special%23characters] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[--query_params4-?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params5-https://example.com] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params6-https://example.com?key1=123&key2=456] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com?existing_key=existing_value--query_params7-https://example.com?existing_key=existing_value&existing_key=new_value&existing_key=new_value_2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key-prev1=foo&prev2=bar-query_params8-s3://bucket/key?prev1=foo&prev2=bar&param1=value1&param2=value2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key?existing_param=existing_value--query_params9-s3://bucket/key?existing_param=existing_value&new_param=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_path_preserves_uri_schemes_hosts_queries_and_fragments [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_extract_and_normalize_path [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_is_databricks_acled_artifacts_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc:port/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc:port/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://incorrect:netloc:format@databricks/path/a] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope::key_prefix@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope:key_prefix:@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[ftp://user:pass@realhost:port/path/nowhere-ftp://user:pass@realhost:port/path/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs:/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-dbfs://nondatabricks/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format/path/-dbfs://incorrect:netloc:format/path/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks-dbfs:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/-dbfs:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-runs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-models:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-s3:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b-databricks-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks-dbfs://databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://Profile-dbfs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://profile/-dbfs://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key/random_stuff-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-nondatabricks://profile-dbfs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-databricks://Profile-runs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-nondatabricks://profile-runs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-databricks://profile-models://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-nondatabricks://Profile-models:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-databricks://Profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-nondatabricks://profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-databricks://profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-nondatabricks://Profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-databricks://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-nothing://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-databricks://OtherProfile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-nondatabricks://Profile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-databricks://OtherProfile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-nondatabricks://Profile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-databricks://OtherProfile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-nondatabricks://Profile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/pp-databricks://OtherProfile-dbfs://profile@databricks/pp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-databricks://profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-nondatabricks://Profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b-databricks://not:legit:auth] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope::key] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs:/path/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key:@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope::key@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[s3:/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@host:port/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@databricks/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[/tmp/path-/dbfs/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path-/dbfs/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path/a/b-/dbfs/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/dbfs/123/abc-/dbfs/dbfs/123/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[some/relative/local/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[s3:/some/s3/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[C:/cool/windows/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[my/path-{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[#my/path?a=b-{cwd}/#my/path?a=b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file://myhostname/my/path-file://myhostname/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:///my/path-file:///{drive}my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:my/path-file://{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[/home/my/path-/home/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[dbfs://databricks/a/b-dbfs://databricks/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[s3://host/my/path-s3://host/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[#my/path?a=b-file://{cwd}/#my/path?a=b] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file://myhostname/my/path-file://myhostname/my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:///my/path-file:///{drive}my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[/home/my/path-file:///{drive}home/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[dbfs://databricks/a/b-dbfs://databricks/a/b] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[s3://host/my/path-s3://host/my/path] [33mSKIPPED[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/.fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[//dbfs////my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[///Volumes/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs://my///path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[/My_Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[s3a:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volume:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[/fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================
1.35s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain]
1.32s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain]
1.15s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain]
1.14s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream]
1.11s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain]
1.10s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream]
0.01s call     tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None]

(3 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m========== [32m224 passed[0m, [33m[1m9 skipped[0m, [33m[1m3 deselected[0m, [33m[1m14 warnings[0m[33m in 7.89s[0m[33m ===========[0m

2026-01-16 17:43:05,567 - src.tools.run_test - INFO - unit_test.sh output:
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2023-6831/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: timeout-2.3.1, anyio-4.5.2, cov-5.0.0, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 236 items / 3 deselected / 233 selected

tests/server/test_handlers.py::test_health [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  0%][0m
tests/server/test_handlers.py::test_get_endpoints [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_all_model_registry_endpoints_available [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  1%][0m
tests/server/test_handlers.py::test_can_parse_json [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  2%][0m
tests/server/test_handlers.py::test_can_parse_post_json_with_content_type_params [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_get_json_with_unknown_fields [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_parse_json_string [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  3%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_invalid_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_can_block_post_request_with_missing_content_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  4%][0m
tests/server/test_handlers.py::test_search_runs_default_view_type [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_log_batch_api_req [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  5%][0m
tests/server/test_handlers.py::test_catch_mlflow_exception [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_create_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_get_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  6%][0m
tests/server/test_handlers.py::test_update_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_rename_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  7%][0m
tests/server/test_handlers.py::test_delete_registered_model [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_search_registered_models [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  8%][0m
tests/server/test_handlers.py::test_get_latest_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_create_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_set_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [  9%][0m
tests/server/test_handlers.py::test_delete_registered_model_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_get_model_version_details [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 10%][0m
tests/server/test_handlers.py::test_update_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_transition_model_version_stage [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 11%][0m
tests/server/test_handlers.py::test_delete_model_version [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_get_model_version_download_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_search_model_versions [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 12%][0m
tests/server/test_handlers.py::test_set_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_delete_model_version_tag [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 13%][0m
tests/server/test_handlers.py::test_set_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_delete_registered_model_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 14%][0m
tests/server/test_handlers.py::test_get_model_version_by_alias [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[http] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_artifact_uri_factory[https] [32mPASSED | MEM 0.6/3.8 GB | DISK 66.6/1006.9 GB[0m[33m [ 15%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 67.1/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream] [32mPASSED | MEM 0.8/3.8 GB | DISK 67.6/1006.9 GB[0m[33m [ 16%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain] [32mPASSED | MEM 0.7/3.8 GB | DISK 68.0/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain] [32mPASSED | MEM 0.8/3.8 GB | DISK 68.5/1006.9 GB[0m[33m [ 17%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream] [32mPASSED | MEM 0.9/3.8 GB | DISK 69.0/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[None] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 18%][0m
tests/store/artifact/test_http_artifact_repo.py::test_log_artifacts[dir] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_list_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 19%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_file[dir/b.xtx] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 20%][0m
tests/store/artifact/test_http_artifact_repo.py::test_download_artifacts [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_default_host_creds [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[a.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 21%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[dir/b.txt] [32mPASSED | MEM 1.0/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 22%][0m
tests/store/artifact/test_http_artifact_repo.py::test_create_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_complete_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 23%][0m
tests/store/artifact/test_http_artifact_repo.py::test_abort_multipart_upload [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_extract_db_type_from_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB-result0] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 24%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/-result1] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://aAbB/path-result2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 25%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix-result3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile:prefix/extra-result4] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 26%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[nondatabricks://profile:prefix-result5] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile-result6] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks://profile/-result7] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 27%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix-result8] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile:prefix/extra-result9] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 28%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile-result10] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri[databricks-uc://profile/-result11] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 29%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/profile:prefix] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_no_netloc[databricks://] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 30%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix:extra  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 31%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix extra] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:prefix  ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 32%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_get_db_info_from_uri_errors_invalid_profile[databricks://profile: ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 33%][0m
tests/utils/test_uri.py::test_is_local_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 34%][0m
tests/utils/test_uri.py::test_is_local_uri_windows [33mSKIPPED[0m (Windows-...)[33m [ 34%][0m
tests/utils/test_uri.py::test_is_databricks_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_is_http_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 35%][0m
tests/utils/test_uri.py::test_append_to_uri_path_joins_uri_paths_and_posixpaths_correctly [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_path_handles_special_uri_characters_in_posixpaths [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params0-https://example.com?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 36%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com-existing_key=existing_value-query_params1-https://example.com?existing_key=existing_value&new_key=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params2-https://example.com?key1=value1&key2=value2&key3=value3] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 37%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params3-https://example.com?key=value+with+spaces&key2=special%23characters] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[--query_params4-?key=value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 38%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params5-https://example.com] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com--query_params6-https://example.com?key1=123&key2=456] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[https://example.com?existing_key=existing_value--query_params7-https://example.com?existing_key=existing_value&existing_key=new_value&existing_key=new_value_2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 39%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key-prev1=foo&prev2=bar-query_params8-s3://bucket/key?prev1=foo&prev2=bar&param1=value1&param2=value2] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_query_params_appends_as_expected[s3://bucket/key?existing_param=existing_value--query_params9-s3://bucket/key?existing_param=existing_value&new_param=new_value] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 40%][0m
tests/utils/test_uri.py::test_append_to_uri_path_preserves_uri_schemes_hosts_queries_and_fragments [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_extract_and_normalize_path [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 41%][0m
tests/utils/test_uri.py::test_is_databricks_acled_artifacts_uri [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 42%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 43%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 44%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 45%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-databricks-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 46%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-databricks://profile-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 47%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 48%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-databricks://scope:key_prefix-databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[ftp://user:pass@realhost:port/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 49%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs:/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 50%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://incorrect:netloc:format/path/to/nowhere-None-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 51%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 52%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://@databricks-uc:port/path/to/nowhere-databricks-uc-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 53%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://profile@databricks-uc:port/path/to/nowhere-databricks-uc://profile-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 54%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[dbfs://scope:key_prefix@databricks-uc:port/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[runs://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 55%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[models://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri[s3://scope:key_prefix@databricks-uc/path/abc-databricks-uc://scope:key_prefix-databricks-uc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 56%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://incorrect:netloc:format@databricks/path/a] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope::key_prefix@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_get_databricks_profile_uri_from_artifact_uri_error_cases[dbfs://scope:key_prefix:@databricks/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 57%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[ftp://user:pass@realhost:port/path/nowhere-ftp://user:pass@realhost:port/path/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs:/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 58%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://nondatabricks/path/to/nowhere-dbfs://nondatabricks/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format/path/-dbfs://incorrect:netloc:format/path/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 59%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks-dbfs:] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/-dbfs:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 60%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 61%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 62%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://profile@databricks:port/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://scope:key_prefix@databricks:port/path/abc-dbfs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 63%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[dbfs://incorrect:netloc:format@databricks/path/to/nowhere-dbfs:/path/to/nowhere] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[runs://scope:key_prefix@databricks/path/abc-runs:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 64%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[models://scope:key_prefix@databricks/path/abc-models:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_remove_databricks_profile_info_from_artifact_uri[s3://scope:key_prefix@databricks/path/abc-s3:/path/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 65%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b-databricks-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks-dbfs://databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://Profile-dbfs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 66%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://profile/-dbfs://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 67%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-databricks://scope:key/random_stuff-dbfs://scope:key@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs:/path/a/b/-nondatabricks://profile-dbfs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 68%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-databricks://Profile-runs://Profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[runs:/path/a/b/-nondatabricks://profile-runs:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-databricks://profile-models://profile@databricks/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 69%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[models:/path/a/b/-nondatabricks://Profile-models:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-databricks://Profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 70%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[s3:/path/a/b/-nondatabricks://profile-s3:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-databricks://profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 71%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp:/path/a/b/-nondatabricks://Profile-ftp:/path/a/b/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-databricks://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[ftp://user:pass@host:port/a/b-nothing://Profile-ftp://user:pass@host:port/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 72%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-databricks://OtherProfile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks-nondatabricks://Profile-dbfs://databricks] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 73%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-databricks://OtherProfile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://databricks/path/a/b-nondatabricks://Profile-dbfs://databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 74%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-databricks://OtherProfile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://@databricks/path/a/b-nondatabricks://Profile-dbfs://@databricks/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/pp-databricks://OtherProfile-dbfs://profile@databricks/pp] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 75%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-databricks://profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri[dbfs://profile@databricks/path-nondatabricks://Profile-dbfs://profile@databricks/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 76%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b-databricks://not:legit:auth] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope::key] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 77%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key:/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_add_databricks_profile_info_to_artifact_uri_errors[dbfs:/path/a/b/-databricks://scope:key ] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs:/path/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 78%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 79%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@databricks/a/b-True] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 80%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key:@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope::key@databricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://profile@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 81%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key@notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://scope:key/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 82%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[dbfs://notdatabricks/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[s3:/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 83%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@host:port/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_is_valid_dbfs_uri[ftp://user:pass@databricks/path/a/b-False] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[/tmp/path-/dbfs/tmp/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 84%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path-/dbfs/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/path/a/b-/dbfs/path/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 85%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path[dbfs:/dbfs/123/abc-/dbfs/dbfs/123/abc] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[some/relative/local/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 86%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[s3:/some/s3/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_dbfs_hdfs_uri_to_fuse_path_raises[C:/cool/windows/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[my/path-{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 87%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[#my/path?a=b-{cwd}/#my/path?a=b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file://myhostname/my/path-file://myhostname/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 88%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:///my/path-file:///{drive}my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[file:my/path-file://{cwd}/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 89%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[/home/my/path-/home/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[dbfs://databricks/a/b-dbfs://databricks/a/b] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local[s3://host/my/path-s3://host/my/path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 90%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[#my/path?a=b-file://{cwd}/#my/path?a=b] [33mSKIPPED[0m[33m [ 91%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file://myhostname/my/path-file://myhostname/my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:///my/path-file:///{drive}my/path] [33mSKIPPED[0m[33m [ 92%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[file:my/path-file://{cwd}/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[/home/my/path-file:///{drive}home/my/path] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[dbfs://databricks/a/b-dbfs://databricks/a/b] [33mSKIPPED[0m[33m [ 93%][0m
tests/utils/test_uri.py::test_resolve_uri_if_local_on_windows[s3://host/my/path-s3://host/my/path] [33mSKIPPED[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 94%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 95%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[/.fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[//dbfs////my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[///Volumes/] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 96%][0m
tests/utils/test_uri.py::test_correctly_detect_fuse_and_uc_uris[dbfs://my///path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[/My_Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 97%][0m
tests/utils/test_uri.py::test_negative_detection[s3a:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volumes/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 98%][0m
tests/utils/test_uri.py::test_negative_detection[Volume:/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[dbfs/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [ 99%][0m
tests/utils/test_uri.py::test_negative_detection[/fuse-mounts/my_path] [32mPASSED | MEM 0.6/3.8 GB | DISK 69.5/1006.9 GB[0m[33m [100%][0m

============================= slowest 10 durations =============================
1.35s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-MLmodel-text/plain]
1.32s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-MLmodel-text/plain]
1.15s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.txt-text/plain]
1.14s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[None-c.pkl-application/octet-stream]
1.11s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.txt-text/plain]
1.10s call     tests/store/artifact/test_http_artifact_repo.py::test_log_artifact[dir-c.pkl-application/octet-stream]
0.01s call     tests/store/artifact/test_http_artifact_repo.py::test_delete_artifacts[None]

(3 durations < 0.005s hidden.  Use -vv to show these durations.)
[33m========== [32m224 passed[0m, [33m[1m9 skipped[0m, [33m[1m3 deselected[0m, [33m[1m14 warnings[0m[33m in 7.89s[0m[33m ===========[0m

2026-01-16 17:43:05,609 - src.agents.base - INFO - Tool RunTest: âœ“
2026-01-16 17:43:05,609 - src.agents.base - INFO - Tool RunTest: âœ“
2026-01-16 17:43:11,289 - src.agents.base - INFO - SingleAgent - LLM response (861 chars):
```json
{
  "status": "success",
  "vulnerability": "Path traversal and external path control (CWE-22, CWE-73) in validate_path_is_safe allowed unsafe paths like '../' or encoded traversal to bypass checks.",
  "fix": "validate_path_is_safe now blocks any path with '..' as a segment before or after normalization, blocks null bytes, encoded traversal, and returns a generic error message. This prevents all tested traversal and injection vectors.",
  "iterations": 4,
  "files_modified": ["mlflow/utils/uri.py"],
  "verification": {
    "poc_passed": true,
    "regression_passed": true
  }
}
```
**Summary:**  
- All PoC and regression/unit tests now pass.
- The patch blocks all path traversal attempts, including encoded and normalized forms, and matches the expected error message format.  
- The fix is minimal, secure, and preserves existing conventions.
2026-01-16 17:43:11,289 - src.agents.base - INFO - SingleAgent - LLM response (861 chars):
```json
{
  "status": "success",
  "vulnerability": "Path traversal and external path control (CWE-22, CWE-73) in validate_path_is_safe allowed unsafe paths like '../' or encoded traversal to bypass checks.",
  "fix": "validate_path_is_safe now blocks any path with '..' as a segment before or after normalization, blocks null bytes, encoded traversal, and returns a generic error message. This prevents all tested traversal and injection vectors.",
  "iterations": 4,
  "files_modified": ["mlflow/utils/uri.py"],
  "verification": {
    "poc_passed": true,
    "regression_passed": true
  }
}
```
**Summary:**  
- All PoC and regression/unit tests now pass.
- The patch blocks all path traversal attempts, including encoded and normalized forms, and matches the expected error message format.  
- The fix is minimal, secure, and preserves existing conventions.
2026-01-16 17:43:11,290 - orchestrator - INFO - Completed: Sample: CVE-2023-6831 | Status: success | Rounds: 3 | Duration: 146.9s
2026-01-16 17:43:11,290 - orchestrator - INFO - Completed: Sample: CVE-2023-6831 | Status: success | Rounds: 3 | Duration: 146.9s
2026-01-16 17:43:11,437 - __main__ - INFO - Extracted patch via /workspace/fix.patch (2154 bytes)
